<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>八字</title>
    <link rel="icon" href="static/favicon.ico" type="image/x-icon">
    <link rel="icon" href="static/favicon.png" type="image/png">
    <link rel="apple-touch-icon" sizes="180x180" href="static/apple-touch-icon.png">
    <link rel="stylesheet" href="css/paipan.css">
</head>
<body>
    <div class="container">
        <h1>八字</h1>
        
        <div>
            <label for="name">姓名</label>
            <input type="text" id="name" name="name" placeholder="选填" style="width: 100%; padding: 12px; margin-bottom: 20px; border: 1px solid #d1d9e6; border-radius: 6px; box-sizing: border-box; font-size: 16px;">
        </div>
        
        <div class="date-inputs-row">
            <div class="date-input-group">
                <label for="year">年</label>
                <input type="number" id="year" name="year" placeholder="2000" required>
            </div>
            <div class="date-input-group">
                <label for="month">月</label>
                <input type="number" id="month" name="month" min="1" max="12" placeholder="1-12" required>
            </div>
            <div class="date-input-group">
                <label for="day">日</label>
                <input type="number" id="day" name="day" min="1" max="31" placeholder="1-31" required>
            </div>
        </div>

        <div>
            <label for="hour">时辰:</label>
            <select id="hour" name="hour" required>
                <option value="0"selected>早子时 (00:00-01:00)</option>
                <option value="1">丑时 (01:00-03:00)</option>
                <option value="2">寅时 (03:00-05:00)</option>
                <option value="3">卯时 (05:00-07:00)</option>
                <option value="4">辰时 (07:00-09:00)</option>
                <option value="5">巳时 (09:00-11:00)</option>
                <option value="6">午时 (11:00-13:00)</option>
                <option value="7">未时 (13:00-15:00)</option>
                <option value="8">申时 (15:00-17:00)</option>
                <option value="9">酉时 (17:00-19:00)</option>
                <option value="10">戌时 (19:00-21:00)</option>
                <option value="11">亥时 (21:00-23:00)</option>
                <option value="12">晚子时 (23:00-24:00)</option>
            </select>
        </div>
        <div>
            <label>性别:</label>
            <div class="gender-buttons">
                <button type="button" class="gender-button" id="genderMale">男</button>
                <button type="button" class="gender-button" id="genderFemale">女</button>
            </div>
        </div>

        <div>
            <input type="checkbox" id="enableSecondPerson" onchange="toggleSecondPersonInputs()">
            <label for="enableSecondPerson" style="display: inline; margin-left: 5px;">合盘</label>
        </div>

        <div id="secondPersonInputs" style="display:none; margin-top: 20px; padding-top:20px; border-top: 1px dashed #ccc;">
            <h2>第二人信息</h2>
            <div class="date-inputs-row">
                <div class="date-input-group">
                    <label for="year2">年</label>
                    <input type="number" id="year2" name="year2" placeholder="2000">
                </div>
                <div class="date-input-group">
                    <label for="month2">月</label>
                    <input type="number" id="month2" name="month2" min="1" max="12" placeholder="1-12">
                </div>
                <div class="date-input-group">
                    <label for="day2">日</label>
                    <input type="number" id="day2" name="day2" min="1" max="31" placeholder="1-31">
                </div>
            </div>
            <div>
                <label for="hour2">时辰:</label>
                <select id="hour2" name="hour2">
                    <option value="0"selected>早子时 (00:00-01:00)</option>
                    <option value="1">丑时 (01:00-03:00)</option>
                    <option value="2">寅时 (03:00-05:00)</option>
                    <option value="3">卯时 (05:00-07:00)</option>
                    <option value="4">辰时 (07:00-09:00)</option>
                    <option value="5">巳时 (09:00-11:00)</option>
                    <option value="6">午时 (11:00-13:00)</option>
                    <option value="7">未时 (13:00-15:00)</option>
                    <option value="8">申时 (15:00-17:00)</option>
                    <option value="9">酉时 (17:00-19:00)</option>
                    <option value="10">戌时 (19:00-21:00)</option>
                    <option value="11">亥时 (21:00-23:00)</option>
                    <option value="12">晚子时 (23:00-24:00)</option>
                </select>
            </div>
            <div>
                <label>性别:</label>
                <div class="gender-buttons">
                    <button type="button" class="gender-button" id="genderMale2">男</button>
                    <button type="button" class="gender-button" id="genderFemale2">女</button>
                </div>
            </div>
        </div>

        <button class="ai-question-button" onclick="generateAstrolabe()">开始排盘</button>
        <h2>排盘结果:</h2>
        <div id="result" style="display:none;"></div>
        <div id="result2" style="margin-top: 20px; display:none;"></div>
        
        <div id="aiQuestionContainer" style="display:none;">
            <div id="aiQuestionOptions">
                <button class="unified-button" data-default-text="请进行全面分析八字格局和五行喜忌，然后分析此命局中的用神特性，在命主八字中的具体表现及如何影响命主一生；喜神其如何增强命主的运势，以及在何时何地发挥最大效用；忌神其如何制约命主的发展，以及应当如何化解其负面影响；分析其性格特点、思维方式和行为模式，指出其性格中的优势和潜在盲点" onclick="selectOption(this, 'single')">综合</button>
                <button class="unified-button" data-default-text="请分析我在当前大运的运势，并给出总结和建议以及注意事项。" onclick="selectOption(this, 'single')">大运</button>
                <button class="unified-button" data-default-text="请分析我在今年的运势，包含事业、财运、感情、健康并给出总结和建议以及注意事项。" onclick="selectOption(this, 'single')">流年</button>
                <button class="unified-button" data-default-text="请分析我在今年每一个月的运势，包含事业、财运、感情、健康并给出总结和建议以及注意事项。以 4k max token 输出" onclick="selectOption(this, 'single')">年运</button>
                <button class="unified-button" data-default-text="请分析我今、明、后三年的运势，并给出总结和建议以及注意事项。" onclick="selectOption(this, 'single')">三年</button>
                <button class="unified-button" data-default-text="请分析我的事业和财运，制定阶段性职业发展计划，指出关键发展期和可能的职业转折点；优化人际关系的具体策略，包括如何处理家庭、职场和社交关系；分析最适合的职业领域和工作环境，指出哪些行业与命主五行相生相助；职业发展的关键时期和可能面临的挑战，结合大运流年，指出事业发展的黄金期和需要谨慎的时段；财运特点，包括财富来源、积累方式和财运波动周期，指出命局中的财星和破财因素；适合的投资策略和理财方向，指出哪些投资领域与命主五行相符。并给出总结和建议以及注意事项" onclick="selectOption(this, 'single')">事业财运</button>
                <button class="unified-button" data-default-text="请分析我的感情和婚姻状况，婚姻宫位的强弱和特点，预测婚姻生活的整体质量和可能面临的挑战，指出婚姻中的关键时期；潜在配偶的性格特点、外貌特征和职业倾向，分析最佳配偶类型；分析子女宫的特点和强弱，预测生育能力和子女数量，以及与子女关系的发展趋势。" onclick="selectOption(this, 'single')">感情婚姻</button>
                <button class="unified-button" data-default-text="请分析我与父母、子女、兄弟姐妹的关系特点，指出家庭关系中的优势和需要注意的方面；在人际关系中的表现模式，包括与家人、朋友、同事的互动特点，以及如何根据八字特性优化人际关系。" onclick="selectOption(this, 'single')">家庭/人际</button>
                <button class="unified-button" data-default-text="请分析我的健康状况，分析体质特点和潜在健康风险，指出命局中的疾厄宫位和对应的身体部位；评估长寿潜力和影响寿命的关键因素，指出需要特别注意的时期；提供延年益寿的具体建议，包括如何调整生活方式、心态和环境以增强命主的寿元。" onclick="selectOption(this, 'single')">健康</button>
                <button class="unified-button" onclick="showCustomInput('single'); selectOption(this, 'single');">自定义</button>
            </div>
            <div id="customQuestionContainer" style="width: 100%; margin-top: 10px;">
                <input type="text" id="customQuestion" placeholder="请输入您的问题" style="display: none; width: 100%; padding: 12px; border: 1px solid #c5cae9; border-radius: 6px; box-sizing: border-box; font-size: 16px;">
            </div>
            <button class="ai-question-button ai-glow-button" onclick="askAI()" style="margin-top: 10px;">向 AI 提问</button>
        </div>

        <!-- 合盘分析容器 -->
        <div id="combinedAnalysisContainer" style="display:none;">
            <div id="combinedQuestionOptions">
                <button class="unified-button" data-default-text="请分析两个人命盘合不合，双方是否互补，双方性格怎么样，在一起几率高不高，有利和不利的婚姻因素，需要注意的年份，并给出总结和建议以及注意事项。" onclick="selectOption(this, 'combined');">合婚</button>
                <button class="unified-button" data-default-text="请分析我们在事业合作方面的匹配度，并给出总结和建议以及注意事项。" onclick="selectOption(this, 'combined');">合作</button>
                <button class="unified-button" onclick="showCustomInput('combined'); selectOption(this, 'combined');">自定义</button>
            </div>
            <div id="customCombinedQuestionContainer" style="width: 100%; margin-top: 10px;">
                <input type="text" id="customCombinedQuestion" placeholder="请输入您的问题" style="display: none; width: 100%; padding: 12px; border: 1px solid #c5cae9; border-radius: 6px; box-sizing: border-box; font-size: 16px;">
            </div>
            <button class="ai-question-button ai-glow-button" onclick="askAIForCompatibility()" style="margin-top: 10px;">AI 合盘分析</button>
        </div>

    </div>

    <script src="https://cdn.jsdelivr.net/gh/6tail/lunar-javascript@master/lunar.js"></script>
    <script src="js/ai.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/iztro@latest/dist/iztro.min.js"></script>
<script src="js/paipan/calendar.js"></script>
    <script src="js/paipan/paipan.js"></script>
    <script src="js/paipan/common.js"></script>
    <script src="js/paipan/bz.js"></script>
</body>
</html>
