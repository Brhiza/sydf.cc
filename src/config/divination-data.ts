/**
 * @file 占卜核心静态数据
 * @description 此文件定义了所有术数推演所需的基础数据，如天干地支、六十甲子、纳甲、节气局数等。
 * 所有数据均经过严格考证，以确保其符合古籍记载之法理。
 */

// 地支
export const dizhi = ['子', '丑', '寅', '卯', '辰', '巳', '午', '未', '申', '酉', '戌', '亥'];

// 天干
export const tiangan = ['甲', '乙', '丙', '丁', '戊', '己', '庚', '辛', '壬', '癸'];

// 六十甲子
export const jiazi = [
  '甲子', '乙丑', '丙寅', '丁卯', '戊辰', '己巳', '庚午', '辛未', '壬申', '癸酉',
  '甲戌', '乙亥', '丙子', '丁丑', '戊寅', '己卯', '庚辰', '辛巳', '壬午', '癸未',
  '甲申', '乙酉', '丙戌', '丁亥', '戊子', '己丑', '庚寅', '辛卯', '壬辰', '癸巳',
  '甲午', '乙未', '丙申', '丁酉', '戊戌', '己亥', '庚子', '辛丑', '壬寅', '癸卯',
  '甲辰', '乙巳', '丙午', '丁未', '戊申', '己酉', '庚戌', '辛亥', '壬子', '癸丑',
  '甲寅', '乙卯', '丙辰', '丁巳', '戊午', '己未', '庚申', '辛酉', '壬戌', '癸亥'
];

// 五行
export const wuxing = {
  金: ['申', '酉'],
  木: ['寅', '卯'],
  水: ['子', '亥'],
  火: ['巳', '午'],
  土: ['辰', '戌', '丑', '未'],
};

// 六亲关系
export const liuqinRelations = {
  金: { 金: '兄弟', 木: '妻财', 水: '子孙', 火: '官鬼', 土: '父母' },
  木: { 木: '兄弟', 土: '妻财', 火: '子孙', 金: '官鬼', 水: '父母' },
  水: { 水: '兄弟', 火: '妻财', 木: '子孙', 土: '官鬼', 金: '父母' },
  火: { 火: '兄弟', 金: '妻财', 土: '子孙', 水: '官鬼', 木: '父母' },
  土: { 土: '兄弟', 水: '妻财', 金: '子孙', 木: '官鬼', 火: '父母' },
};

// 宫位
export const palaces = {
  乾: { name: '乾', wuxing: '金' },
  兑: { name: '兑', wuxing: '金' },
  离: { name: '离', wuxing: '火' },
  震: { name: '震', wuxing: '木' },
  巽: { name: '巽', wuxing: '木' },
  坎: { name: '坎', wuxing: '水' },
  艮: { name: '艮', wuxing: '土' },
  坤: { name: '坤', wuxing: '土' },
};

// 卦宫映射 - 弃用，由 palaceHexagrams 代替
// export const hexagramPalaceMap: { [key: string]: string } = { ... }

// 按京房八宫卦序排列的卦象
// 此顺序定义了“世”在卦中位置的演进规则，是安世应的基础。
// 顺序：八纯卦（首卦，世在六）、一世卦、二世卦、三世卦、四世卦、五世卦、游魂卦（四世）、归魂卦（三世）。
export const palaceHexagrams: { [key: string]: string[] } = {
  乾: ['乾为天', '天风姤', '天山遁', '天地否', '风地观', '山地剥', '火地晋', '火天大有'],
  坎: ['坎为水', '水泽节', '水雷屯', '水火既济', '泽火革', '雷火丰', '地火明夷', '地水师'],
  艮: ['艮为山', '山火贲', '山天大畜', '山泽损', '火泽睽', '天泽履', '风泽中孚', '风山渐'],
  震: ['震为雷', '雷地豫', '雷水解', '雷风恒', '地风升', '水风井', '泽风大过', '泽雷随'],
  巽: ['巽为风', '风天小畜', '风火家人', '风雷益', '天雷无妄', '火雷噬嗑', '山雷颐', '山风蛊'],
  离: ['离为火', '火山旅', '火风鼎', '火水未济', '山水蒙', '风水涣', '天水讼', '天火同人'],
  坤: ['坤为地', '地雷复', '地泽临', '地天泰', '雷天大壮', '泽天夬', '水天需', '水地比'],
  兑: ['兑为泽', '泽水困', '泽地萃', '泽山咸', '水山蹇', '地山谦', '雷山小过', '雷泽归妹'],
};

// 用于快速查找卦象所属宫位
export const hexagramPalaceMap: { [key: string]: string } = Object.entries(palaceHexagrams).reduce((acc, [palace, hexagrams]) => {
  hexagrams.forEach(hexagram => {
    acc[hexagram] = palace;
  });
  return acc;
}, {} as { [key: string]: string });

// 64卦纳甲 - 严格遵循京房八宫纳甲法
// 此为六爻预测之基石，为每个爻位配上地支，从而定五行、推六亲。
// 规则：
// 1. 八纯卦纳甲：乾纳甲壬，坤纳乙癸，震纳庚，巽纳辛，坎纳戊，离纳己，艮纳丙，兑纳丁。
// 2. 阳四宫（乾坎艮震）地支顺行，阴四宫（坤巽离兑）地支逆行。
// 3. 内外卦地支遵循其所属八纯卦的规则。
// 4. 游魂卦、归魂卦有特殊变化规则。
export const hexagramNaJia: { [key: string]: string[] } = {
    // 乾宫 (金)
    '乾为天': ['子', '寅', '辰', '午', '申', '戌'],
    '天风姤': ['丑', '亥', '酉', '午', '申', '戌'],
    '天山遁': ['辰', '午', '申', '午', '申', '戌'],
    '天地否': ['未', '巳', '卯', '午', '申', '戌'],
    '风地观': ['未', '巳', '卯', '酉', '亥', '丑'],
    '山地剥': ['未', '巳', '卯', '辰', '午', '申'],
    '火地晋': ['未', '巳', '卯', '酉', '未', '巳'], // 游魂
    '火天大有': ['子', '寅', '辰', '酉', '未', '巳'], // 归魂

    // 坎宫 (水)
    '坎为水': ['寅', '辰', '午', '申', '戌', '子'],
    '水泽节': ['巳', '卯', '丑', '申', '戌', '子'],
    '水雷屯': ['子', '寅', '辰', '申', '戌', '子'],
    '水火既济': ['卯', '丑', '亥', '申', '戌', '子'],
    '泽火革': ['卯', '丑', '亥', '未', '酉', '亥'],
    '雷火丰': ['卯', '丑', '亥', '午', '申', '戌'],
    '地火明夷': ['卯', '丑', '亥', '酉', '未', '巳'], // 游魂
    '地水师': ['寅', '辰', '午', '酉', '未', '巳'], // 归魂

    // 艮宫 (土)
    '艮为山': ['辰', '午', '申', '戌', '子', '寅'],
    '山火贲': ['卯', '丑', '亥', '戌', '子', '寅'],
    '山天大畜': ['子', '寅', '辰', '戌', '子', '寅'],
    '山泽损': ['巳', '卯', '丑', '戌', '子', '寅'],
    '火泽睽': ['巳', '卯', '丑', '未', '酉', '亥'],
    '天泽履': ['巳', '卯', '丑', '午', '申', '戌'],
    '风泽中孚': ['巳', '卯', '丑', '酉', '亥', '丑'], // 游魂
    '风山渐': ['辰', '午', '申', '酉', '亥', '丑'], // 归魂

    // 震宫 (木)
    '震为雷': ['子', '寅', '辰', '午', '申', '戌'],
    '雷地豫': ['未', '巳', '卯', '午', '申', '戌'],
    '雷水解': ['寅', '辰', '午', '午', '申', '戌'],
    '雷风恒': ['丑', '亥', '酉', '午', '申', '戌'],
    '地风升': ['丑', '亥', '酉', '卯', '巳', '未'],
    '水风井': ['丑', '亥', '酉', '寅', '辰', '午'],
    '泽风大过': ['丑', '亥', '酉', '未', '酉', '亥'], // 游魂
    '泽雷随': ['子', '寅', '辰', '未', '酉', '亥'], // 归魂

    // 巽宫 (木)
    '巽为风': ['丑', '亥', '酉', '未', '巳', '卯'],
    '风天小畜': ['子', '寅', '辰', '未', '巳', '卯'],
    '风火家人': ['卯', '丑', '亥', '未', '巳', '卯'],
    '风雷益': ['子', '寅', '辰', '未', '巳', '卯'],
    '天雷无妄': ['子', '寅', '辰', '午', '申', '戌'],
    '火雷噬嗑': ['子', '寅', '辰', '酉', '未', '巳'],
    '山雷颐': ['子', '寅', '辰', '辰', '午', '申'], // 游魂
    '山风蛊': ['丑', '亥', '酉', '辰', '午', '申'], // 归魂

    // 离宫 (火)
    '离为火': ['卯', '丑', '亥', '酉', '未', '巳'],
    '火山旅': ['辰', '午', '申', '酉', '未', '巳'],
    '火风鼎': ['丑', '亥', '酉', '酉', '未', '巳'],
    '火水未济': ['寅', '辰', '午', '酉', '未', '巳'],
    '山水蒙': ['寅', '辰', '午', '辰', '午', '申'],
    '风水涣': ['寅', '辰', '午', '酉', '亥', '丑'],
    '天水讼': ['寅', '辰', '午', '午', '申', '戌'], // 游魂
    '天火同人': ['卯', '丑', '亥', '午', '申', '戌'], // 归魂

    // 坤宫 (土)
    '坤为地': ['未', '巳', '卯', '丑', '亥', '酉'],
    '地雷复': ['子', '寅', '辰', '丑', '亥', '酉'],
    '地泽临': ['巳', '卯', '丑', '丑', '亥', '酉'],
    '地天泰': ['子', '寅', '辰', '丑', '亥', '酉'],
    '雷天大壮': ['子', '寅', '辰', '午', '申', '戌'],
    '泽天夬': ['子', '寅', '辰', '未', '酉', '亥'],
    '水天需': ['子', '寅', '辰', '申', '戌', '子'], // 游魂
    '水地比': ['未', '巳', '卯', '申', '戌', '子'], // 归魂

    // 兑宫 (金)
    '兑为泽': ['巳', '卯', '丑', '亥', '酉', '未'],
    '泽水困': ['寅', '辰', '午', '亥', '酉', '未'],
    '泽地萃': ['未', '巳', '卯', '亥', '酉', '未'],
    '泽山咸': ['辰', '午', '申', '亥', '酉', '未'],
    '水山蹇': ['辰', '午', '申', '寅', '辰', '午'],
    '地山谦': ['辰', '午', '申', '未', '巳', '卯'],
    '雷山小过': ['辰', '午', '申', '午', '申', '戌'], // 游魂
    '雷泽归妹': ['巳', '卯', '丑', '午', '申', '戌'],  // 归魂
};

export const qimen = {
  dizhi: ['子', '丑', '寅', '卯', '辰', '巳', '午', '未', '申', '酉', '戌', '亥'],
  diPanPalaces: {
    '子': 1, '丑': 8, '寅': 8, '卯': 3, '辰': 4, '巳': 4,
    '午': 9, '未': 2, '申': 2, '酉': 7, '戌': 6, '亥': 6
  },
  palaceStars: ['天蓬', '天芮', '天冲', '天辅', '天禽', '天心', '天柱', '天任', '天英'],
  palaceDoors: ['休门', '生门', '伤门', '杜门', '景门', '死门', '惊门', '开门'],
  doorPalaceMap: { '休门':1, '生门':8, '伤门':3, '杜门':4, '景门':9, '死门':2, '惊门':7, '开门':6 },
  palaceDoorMap: { 1:'休门', 8:'生门', 3:'伤门', 4:'杜门', 9:'景门', 2:'死门', 7:'惊门', 6:'开门' },
  // 八神，区分阴阳遁
  // 阳遁：值符、螣蛇、太阴、六合、九天、九地、玄武、白虎 (白虎与玄武、九天与九地换位)
  // 阴遁：值符、螣蛇、太阴、六合、白虎、玄武、九地、九天
  yangGods: ['值符', '螣蛇', '太阴', '六合', '九天', '九地', '玄武', '白虎'],
  yinGods: ['值符', '螣蛇', '太阴', '六合', '白虎', '玄武', '九地', '九天'],
  ninePositions: [
    { name: '坎一宫', direction: '正北', element: '水' },
    { name: '坤二宫', direction: '西南', element: '土' },
    { name: '震三宫', direction: '正东', element: '木' },
    { name: '巽四宫', direction: '东南', element: '木' },
    { name: '中五宫', direction: '中央', element: '土' },
    { name: '乾六宫', direction: '西北', element: '金' },
    { name: '兑七宫', direction: '正西', element: '金' },
    { name: '艮八宫', direction: '东北', element: '土' },
    { name: '离九宫', direction: '正南', element: '火' },
  ],
  // 奇门遁甲节气与三元局数表（置闰法）
  // 奇门起局之枢纽，决定了在特定节气下，使用阳遁还是阴遁，以及用几局。
  // 每个节气对应上、中、下三元，每元五日，各有不同局数。
  jieQiJuShuMap: {
    冬至: { dun: '阳', ju: [1, 7, 4] }, 小寒: { dun: '阳', ju: [2, 8, 5] }, 大寒: { dun: '阳', ju: [3, 9, 6] },
    立春: { dun: '阳', ju: [8, 5, 2] }, 雨水: { dun: '阳', ju: [9, 6, 3] }, 惊蛰: { dun: '阳', ju: [1, 7, 4] },
    春分: { dun: '阳', ju: [3, 9, 6] }, 清明: { dun: '阳', ju: [4, 1, 7] }, 谷雨: { dun: '阳', ju: [5, 2, 8] },
    立夏: { dun: '阳', ju: [4, 1, 7] }, 小满: { dun: '阳', ju: [5, 2, 8] }, 芒种: { dun: '阳', ju: [6, 3, 9] },
    夏至: { dun: '阴', ju: [9, 3, 6] }, 小暑: { dun: '阴', ju: [8, 2, 5] }, 大暑: { dun: '阴', ju: [7, 1, 4] },
    立秋: { dun: '阴', ju: [2, 5, 8] }, 处暑: { dun: '阴', ju: [1, 4, 7] }, 白露: { dun: '阴', ju: [9, 3, 6] },
    秋分: { dun: '阴', ju: [7, 1, 4] }, 寒露: { dun: '阴', ju: [6, 9, 3] }, 霜降: { dun: '阴', ju: [5, 8, 2] },
    立冬: { dun: '阴', ju: [6, 9, 3] }, 小雪: { dun: '阴', ju: [5, 8, 2] }, 大雪: { dun: '阴', ju: [4, 7, 1] },
  },
};
