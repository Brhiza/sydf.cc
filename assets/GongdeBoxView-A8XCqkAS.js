import{d as a,r as t,e as s,c as e,E as l,a as n,h as i,t as c,n as d,g as o,F as r,l as u,o as v}from"./vendor-DTFIXZ-L.js";import{_ as b}from"./index-YrVlgrwv.js";import"./utils-B-ODjm7Z.js";const h={class:"page-container"},g={class:"content-card"},m={class:"stats-container"},p={class:"stat-item"},f={class:"stat-number"},y={class:"stat-item"},k={class:"stat-number"},w={class:"stat-item"},x={class:"stat-number"},L={class:"content-card"},j={class:"section-header"},_={class:"section-title"},C=["disabled","title"],M={class:"table-container"},A={class:"certificate-table"},q={key:0,class:"anonymous-badge"},z={key:1},B={class:"amount-cell"},D={class:"link-cell"},E=["onClick"],S={key:1,class:"no-certificate"},T={key:0},U={class:"total-row"},$={colspan:"3",class:"amount-cell"},F={key:0,class:"empty-state"},G=b(a({__name:"GongdeBoxView",setup(a){const b=t([]),G=t({url:"https://sydf.cc/juanzeng.json",isLoading:!1,error:null});function H(a){return`¥${a.toLocaleString()}`}function I(){return b.value.reduce((a,t)=>a+t.amount,0)}function N(){return b.value.length}async function P(){G.value.isLoading=!0,G.value.error=null;try{const a=await fetch(G.value.url);if(!a.ok)throw new Error(`HTTP error! status: ${a.status}`);const t=await a.json();b.value=t}catch(a){G.value.error="获取远程数据失败，使用本地数据"}finally{G.value.isLoading=!1}}return s(()=>{P()}),(a,t)=>(v(),e("div",h,[t[10]||(t[10]=l('<h1 class="page-title" data-v-0bbdce55>功德箱 🙏</h1><div class="content-card" data-v-0bbdce55><div class="donation-container" data-v-0bbdce55><div class="merit-box-section" data-v-0bbdce55><img src="/gongdexiang.jpg" alt="功德箱" class="merit-box-image" data-v-0bbdce55></div><div class="payment-methods" data-v-0bbdce55><div class="payment-method" data-v-0bbdce55><img src="/alipay.png" alt="支付宝收款码" class="qrcode-image" data-v-0bbdce55><p class="donation-hint" data-v-0bbdce55>支付宝扫码捐赠</p></div><div class="payment-method" data-v-0bbdce55><img src="/wechat.png" alt="微信收款码" class="qrcode-image" data-v-0bbdce55><p class="donation-hint" data-v-0bbdce55>微信扫码捐赠</p></div></div><div class="merit-box-link" data-v-0bbdce55><a href="/#/gongdeboard" target="_blank" rel="noopener noreferrer" data-v-0bbdce55> 🙏 功德榜 </a></div></div></div>',2)),n("div",g,[t[3]||(t[3]=n("h2",{class:"section-title"},[i("功德统计 "),n("span",{class:"highlight-text"},"爱心汇聚")],-1)),n("div",m,[n("div",p,[n("div",f,c(I()),1),t[0]||(t[0]=n("div",{class:"stat-label"},"总捐赠额 (元)",-1))]),n("div",y,[n("div",k,c(N()),1),t[1]||(t[1]=n("div",{class:"stat-label"},"捐赠人数",-1))]),n("div",w,[n("div",x,c(Math.round(I()/N())),1),t[2]||(t[2]=n("div",{class:"stat-label"},"人均捐赠 (元)",-1))])])]),n("div",L,[n("div",j,[n("h2",_,[t[5]||(t[5]=i(" 捐赠证书 ",-1)),n("button",{class:"refresh-button",onClick:P,disabled:G.value.isLoading,title:G.value.isLoading?"正在刷新...":"点击刷新数据"},[(v(),e("svg",{class:d(["refresh-icon",{rotating:G.value.isLoading}]),viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[...t[4]||(t[4]=[n("path",{d:"M1 4v6h6M23 20v-6h-6"},null,-1),n("path",{d:"M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15"},null,-1)])],2))],8,C)])]),t[9]||(t[9]=n("div",{class:"refresh-notice"},[n("p",null,"💡 数据更新可能存在延迟，如需查看最新捐赠记录，请点击上方刷新按钮")],-1)),n("div",M,[n("table",A,[t[7]||(t[7]=n("thead",null,[n("tr",null,[n("th",null,"序号"),n("th",null,"捐赠项目"),n("th",null,"金额"),n("th",null,"日期"),n("th",null,"链接")])],-1)),n("tbody",null,[(v(!0),e(r,null,u(b.value,(a,t)=>{return v(),e("tr",{key:a.id},[n("td",null,c(t+1),1),n("td",null,[a.isAnonymous?(v(),e("span",q,"🙈 匿名捐赠")):(v(),e("span",z,c(a.name||"爱心捐赠"),1))]),n("td",B,c(H(a.amount)),1),n("td",null,c((s=a.date,new Date(s).toLocaleDateString("zh-CN"))),1),n("td",D,[a.certificateUrl?(v(),e("button",{key:0,onClick:t=>{return s=a.certificateUrl,void(null==window||window.open(s,"_blank"));var s},class:"view-certificate-btn"}," 查看证书 ",8,E)):(v(),e("span",S,"暂无证书"))])]);var s}),128))]),b.value.length>0?(v(),e("tfoot",T,[n("tr",U,[t[6]||(t[6]=n("td",{colspan:"2"},[n("strong",null,"总计")],-1)),n("td",$,[n("strong",null,c(H(I())),1)])])])):o("",!0)]),0===b.value.length?(v(),e("div",F,[...t[8]||(t[8]=[n("div",{class:"empty-icon"},"📋",-1),n("p",null,"暂无捐赠记录",-1)])])):o("",!0)])])]))}}),[["__scopeId","data-v-0bbdce55"]]);export{G as default};
