import{d as e,D as a}from"./DivinationResult-DxDAMqKE.js";import{i as n,j as i,k as s,p as t,l,m as o,s as u,n as r,u as c,d as p,q as d,v,c as g,b as y,x as h,F as m,r as k,y as C,z as R,t as f,e as b,_ as w,o as I,A as T,B as _,C as A,f as q,D as O,E,G as N,H as D,h as L,I as V,J as S,K as x}from"./index-B9uMmlVc.js";var U=(e=>(e.NETWORK_ERROR="NETWORK_ERROR",e.TIMEOUT_ERROR="TIMEOUT_ERROR",e.API_ERROR="API_ERROR",e.DIVINATION_ERROR="DIVINATION_ERROR",e.DIVINATION_INVALID_TYPE="DIVINATION_INVALID_TYPE",e.DIVINATION_DATA_ERROR="DIVINATION_DATA_ERROR",e.AI_ERROR="AI_ERROR",e.AI_TIMEOUT="AI_TIMEOUT",e.AI_INVALID_RESPONSE="AI_INVALID_RESPONSE",e.HISTORY_ERROR="HISTORY_ERROR",e.HISTORY_NOT_FOUND="HISTORY_NOT_FOUND",e.HISTORY_SAVE_ERROR="HISTORY_SAVE_ERROR",e.VALIDATION_ERROR="VALIDATION_ERROR",e.INVALID_QUESTION="INVALID_QUESTION",e.INVALID_PARAMS="INVALID_PARAMS",e.UNKNOWN_ERROR="UNKNOWN_ERROR",e))(U||{});function H(e,a,n,i,s){return{code:e,message:a,endpoint:n,retryCount:i,details:s,timestamp:Date.now(),stack:(new Error).stack}}const B=n("divination",()=>{const a=i(""),n=i(!1),u=i(null),r=i(""),c=i(null),p=i(!1),d=i(!1),v=i(!1),g=i(!1),y=i([]),h=i(""),m=i(!1);let k=null;const C=s(()=>null!==u.value),R=s(()=>""!==r.value);function f(e,a){n.value=!0,p.value=!0,c.value=null,u.value=null,r.value="",g.value=!1,y.value=[];const i={id:`sys-${Date.now()}`,role:"system",content:"ä½ æ˜¯ç²¾é€šå‘¨æ˜“ã€æ¢…èŠ±æ˜“æ•°ã€å¥‡é—¨éç”²ã€å¡”ç½—ç‰Œç­‰æœ¯æ•°çš„AIåŠ©æ‰‹ã€‚è¯·æ ¹æ®å åœç»“æœï¼Œä¸ºç”¨æˆ·æä¾›è§£è¯»ã€‚"},s={id:`msg-${Date.now()}`,role:"user",content:a},t={id:`msg-${Date.now()+1}`,role:"assistant",content:""};y.value=[i,s,t],u.value={id:"",type:e,data:{},aiResponse:""},n.value=!1}async function b(e,n){const{signNumber:i,spreadType:s,signal:l}=n;return await t({type:e,question:a.value.trim(),signNumber:i,spreadType:s,signal:l},void 0,void 0,void 0)}function w(e){r.value+=e;const a=y.value.find(e=>"assistant"===e.role);a&&(a.content+=e)}function I(e){p.value=!1,u.value&&(u.value.id=e.id,u.value.data=e.data,u.value.aiResponse=r.value)}return{question:a,isLoading:n,result:u,aiResponse:r,error:c,isAiLoading:p,viewingHistory:d,isCopied:v,isCancelled:g,conversationHistory:y,followUpQuestion:h,isFollowUpLoading:m,hasResult:C,hasAiResponse:R,cancelGeneration:function(){k&&(k.abort(),g.value=!0,p.value=!1)},startDivination:async function(e,i={}){if(d.value)return;const{signNumber:s,spreadType:l}=i;if(!n.value&&a.value.trim())try{f(e,a.value),k=new AbortController,await b(e,{signNumber:s,spreadType:l,signal:k.signal}).then(e=>{u.value&&(u.value.id=e.id,u.value.data=e.data)}).catch(e=>{throw c.value=e instanceof Error?e.message:"å åœå¤±è´¥ï¼Œè¯·ç¨åé‡è¯•",n.value=!1,p.value=!1,e}),await t({type:e,question:a.value.trim(),signNumber:s,spreadType:l,signal:k.signal},e=>w(e),e=>{c.value=e;const a=y.value.find(e=>"assistant"===e.role);a&&(a.content=e)},e=>I(e))}catch(o){c.value=o instanceof Error?o.message:"å åœå¤±è´¥ï¼Œè¯·ç¨åé‡è¯•",n.value=!1}},initializeNewDivination:f,performDivinationCalculation:b,handleStreamingAIResponse:w,finalizeDivination:I,clearResult:function(){u.value=null,r.value="",c.value=null,a.value="",d.value=!1,y.value=[],h.value=""},loadResultFromHistory:function(e,n){d.value=!0;const i=l.getRecord(e);if(!i)throw new Error(`æœªæ‰¾åˆ°å†å²è®°å½•: ${e}`);a.value=i.question,u.value={...i.result,id:i.id,question:i.question,timestamp:i.timestamp,metadata:{source:"history"}},r.value=i.result.aiResponse||"",y.value=[{id:`hist-sys-${i.id}`,role:"system",content:"ä½ æ˜¯ç²¾é€šå‘¨æ˜“ã€æ¢…èŠ±æ˜“æ•°ã€å¥‡é—¨éç”²ã€å¡”ç½—ç‰Œç­‰æœ¯æ•°çš„AIåŠ©æ‰‹ã€‚è¯·æ ¹æ®å åœç»“æœï¼Œä¸ºç”¨æˆ·æä¾›è§£è¯»ã€‚"},{id:`hist-user-${i.id}`,role:"user",content:i.question},{id:`hist-asst-${i.id}`,role:"assistant",content:i.result.aiResponse||""}]},regenerateAI:async function(e){if(!u.value||p.value)return;p.value=!0,c.value=null,r.value="",g.value=!1,k=new AbortController;const n={id:`msg-${Date.now()}`,role:"assistant",content:""};y.value.push(n);let i=0;const s=async()=>{try{const i=await t({type:e,question:a.value,signal:null==k?void 0:k.signal},e=>{r.value+=e,n.content+=e},e=>{c.value=e,n.content=e},()=>{p.value=!1,u.value&&(u.value.aiResponse=r.value)});i.aiResponse&&(n.content=i.aiResponse),u.value&&(u.value.aiResponse=i.aiResponse||"")}catch(l){if(i<3)return i++,await new Promise(e=>setTimeout(e,1e3)),s();{const e=H(U.AI_ERROR,"é‡æ–°ç”ŸæˆAIè§£è¯»å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•",void 0,i,l);throw c.value=e.message,p.value=!1,e}}};try{await s()}catch(l){}},shareResult:async function(){if(!r.value)return;const a=await(async a=>{if(!a)return"";const n=await e.parse(a);return((new DOMParser).parseFromString(n,"text/html").body.textContent||"").replace(/"/g,'"').replace(/&/g,"&").replace(/</g,"<").replace(/>/g,">").replace(/'/g,"'").replace(/\n{3,}/g,"\n\n").trim()})(r.value);navigator.clipboard.writeText(a).then(()=>{v.value=!0,setTimeout(()=>{v.value=!1},2e3)})},handleSendFollowUp:async function(){if(!h.value.trim()||m.value)return;const e={id:`msg-${Date.now()}`,role:"user",content:h.value.trim()};y.value.push(e);const a={id:`msg-${Date.now()+1}`,role:"assistant",content:""};y.value.push(a),h.value="",m.value=!0;try{o(y.value,e=>{r.value+=e,a.content+=e},e=>{m.value=!1,u.value&&(u.value.aiResponse=e)},e=>{m.value=!1,a.content=e,c.value=e})}catch(n){const e=H(U.AI_ERROR,"å‘é€è¿½é—®å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•",void 0,0,n);c.value=e.message,m.value=!1,a.content=e.message}}}},{persist:!0});function P(e){const a=r(),n=c(),i=B(),{question:s,isLoading:t,result:l,aiResponse:o,error:p,isAiLoading:d,viewingHistory:v,isCopied:g,isCancelled:y,conversationHistory:h,followUpQuestion:m,isFollowUpLoading:k,hasResult:C,hasAiResponse:R}=u(i),{startDivination:f,clearResult:b,loadResultFromHistory:w,regenerateAI:I,shareResult:T,cancelGeneration:_,handleSendFollowUp:A}=i;function q(){if(a.query.historyId){const e={...a.query};delete e.historyId,n.replace({path:a.path,query:e})}}return{question:s,isLoading:t,result:l,aiResponse:o,error:p,isAiLoading:d,viewingHistory:v,isCopied:g,isCancelled:y,conversationHistory:h,followUpQuestion:m,isFollowUpLoading:k,hasResult:C,hasAiResponse:R,startDivination:(a={})=>{f(e.divinationType,a)},clearResult:()=>{b(),q()},regenerateAI:()=>{I(e.divinationType)},handleHistoryParam:function(){const i=a.query.historyId;i&&(a=>{try{w(a,e.divinationType)}catch(i){n.push(`/divination/${e.divinationType}`)}})(i)},clearHistoryParam:q,shareResult:()=>{T()},cancelGeneration:()=>{_()},handleSendFollowUp:e=>{e&&(i.followUpQuestion=e),A()}}}const F={class:"inspiration-card"},$={class:"inspiration-tabs"},M=["onClick"],K={class:"category-heading"},Y={class:"questions-wrapper"},j=["onClick"],Q={class:"questions-wrapper"},z={class:"questions-wrapper"},G={class:"questions-wrapper"},W={class:"questions-wrapper"},J={class:"questions-wrapper"},X={class:"questions-wrapper"},Z={class:"questions-wrapper"},ee={class:"questions-wrapper"},ae={class:"questions-wrapper"},ne={class:"questions-wrapper"},ie={class:"questions-wrapper"},se={class:"questions-wrapper"},te={class:"questions-wrapper"},le={class:"questions-wrapper"},oe={class:"questions-wrapper"},ue=w(p({__name:"InspirationPanel",props:{spreadType:{}},emits:["select","submit"],setup(e,{emit:a}){const n=e,t=a,l=s(()=>n.spreadType?d(n.spreadType):[]),o=s(()=>{var e;return n.spreadType&&(null==(e=v[n.spreadType])?void 0:e.name)||""}),u=s(()=>{const e=[{id:"ganqing",name:"æ„Ÿæƒ…"},{id:"shiye",name:"äº‹ä¸š"},{id:"caifu",name:"è´¢å¯Œ"},{id:"renji",name:"äººé™…"},{id:"rensheng",name:"æˆé•¿"}];return n.spreadType&&l.value.length>0?[{id:"spread",name:"ç‰Œé˜µ"},...e]:e}),r=i(n.spreadType&&d(n.spreadType).length>0?"spread":"ganqing");function c(e){document.querySelectorAll(".questions-wrapper p").forEach(a=>{a.textContent===e&&(a.classList.add("clicked"),setTimeout(()=>{a.classList.remove("clicked")},300))}),t("submit",e)}return(e,a)=>(b(),g("div",F,[a[104]||(a[104]=y("h3",{class:"inspiration-title"},"é—®é¢˜çµæ„Ÿ",-1)),y("div",$,[(b(!0),g(m,null,k(R(u),e=>(b(),g("button",{key:e.id,class:C(["tab-btn",{active:R(r)===e.id}]),onClick:a=>r.value=e.id},f(e.name),11,M))),128))]),e.spreadType&&R(l).length>0?(b(),g("div",{key:0,id:"spread",class:C(["tab-pane",{active:"spread"===R(r)}])},[y("h4",K,f(R(o))+"ä¸“å±é—®é¢˜",1),y("div",Y,[(b(!0),g(m,null,k(R(l),e=>(b(),g("p",{key:e,onClick:a=>c(e)},f(e),9,j))),128))])],2)):h("",!0),y("div",{id:"ganqing",class:C(["tab-pane",{active:"ganqing"===R(r)}])},[a[89]||(a[89]=y("h4",{class:"category-heading"},"æƒ…æ„Ÿå‘å±•",-1)),y("div",Q,[y("p",{onClick:a[0]||(a[0]=e=>c("æˆ‘è¿‘æœŸçš„æ¡ƒèŠ±è¿æ€ä¹ˆæ ·ï¼Ÿ"))},"æˆ‘è¿‘æœŸçš„æ¡ƒèŠ±è¿æ€ä¹ˆæ ·ï¼Ÿ"),y("p",{onClick:a[1]||(a[1]=e=>c("æˆ‘ä»¬ç›®å‰çš„æ„Ÿæƒ…èµ°å‘å¦‚ä½•ï¼Ÿ"))},"æˆ‘ä»¬ç›®å‰çš„æ„Ÿæƒ…èµ°å‘å¦‚ä½•ï¼Ÿ"),y("p",{onClick:a[2]||(a[2]=e=>c("ä»–/å¥¹å¯¹æˆ‘çš„çœŸå®æƒ…æ„Ÿæ˜¯ä»€ä¹ˆï¼Ÿ"))}," ä»–/å¥¹å¯¹æˆ‘çš„çœŸå®æƒ…æ„Ÿæ˜¯ä»€ä¹ˆï¼Ÿ "),y("p",{onClick:a[3]||(a[3]=e=>c("æˆ‘ä»¬ä¹‹é—´æœ‰æœªæ¥å—ï¼Ÿ"))},"æˆ‘ä»¬ä¹‹é—´æœ‰æœªæ¥å—ï¼Ÿ"),y("p",{onClick:a[4]||(a[4]=e=>c("å¦‚ä½•æ”¹å–„æˆ‘ä»¬ç›®å‰çš„å…³ç³»ï¼Ÿ"))},"å¦‚ä½•æ”¹å–„æˆ‘ä»¬ç›®å‰çš„å…³ç³»ï¼Ÿ"),y("p",{onClick:a[5]||(a[5]=e=>c("è¿™æ®µæ„Ÿæƒ…å¯¹æˆ‘çš„å½±å“ï¼Ÿ"))},"è¿™æ®µæ„Ÿæƒ…å¯¹æˆ‘çš„å½±å“ï¼Ÿ")]),a[90]||(a[90]=y("h4",{class:"category-heading"},"æ­£ç¼˜å©šå§»",-1)),y("div",z,[y("p",{onClick:a[6]||(a[6]=e=>c("æˆ‘çš„æ­£ç¼˜ä»€ä¹ˆæ—¶å€™å‡ºç°ï¼Ÿ"))},"æˆ‘çš„æ­£ç¼˜ä»€ä¹ˆæ—¶å€™å‡ºç°ï¼Ÿ"),y("p",{onClick:a[7]||(a[7]=e=>c("æˆ‘çš„å¦ä¸€åŠæ˜¯ä»€ä¹ˆæ ·çš„äººï¼Ÿ"))},"æˆ‘çš„å¦ä¸€åŠæ˜¯ä»€ä¹ˆæ ·çš„äººï¼Ÿ"),y("p",{onClick:a[8]||(a[8]=e=>c("æˆ‘ä½•æ—¶ä¼šç»“å©šï¼Ÿ"))},"æˆ‘ä½•æ—¶ä¼šç»“å©šï¼Ÿ"),y("p",{onClick:a[9]||(a[9]=e=>c("æˆ‘é€‚åˆå’Œç°åœ¨çš„å¯¹è±¡ç»“å©šå—ï¼Ÿ"))}," æˆ‘é€‚åˆå’Œç°åœ¨çš„å¯¹è±¡ç»“å©šå—ï¼Ÿ "),y("p",{onClick:a[10]||(a[10]=e=>c("æˆ‘çš„å©šå§»ç”Ÿæ´»ä¼šå¹¸ç¦å—ï¼Ÿ"))},"æˆ‘çš„å©šå§»ç”Ÿæ´»ä¼šå¹¸ç¦å—ï¼Ÿ"),y("p",{onClick:a[11]||(a[11]=e=>c("å¦‚ä½•å¸å¼•æˆ‘çš„æ­£ç¼˜æ¡ƒèŠ±ï¼Ÿ"))},"å¦‚ä½•å¸å¼•æˆ‘çš„æ­£ç¼˜æ¡ƒèŠ±ï¼Ÿ")]),a[91]||(a[91]=y("h4",{class:"category-heading"},"å…³ç³»éš¾é¢˜",-1)),y("div",G,[y("p",{onClick:a[12]||(a[12]=e=>c("æˆ‘ä»¬ä¹‹é—´å‡ºäº†ä»€ä¹ˆé—®é¢˜ï¼Ÿ"))},"æˆ‘ä»¬ä¹‹é—´å‡ºäº†ä»€ä¹ˆé—®é¢˜ï¼Ÿ"),y("p",{onClick:a[13]||(a[13]=e=>c("å¦‚ä½•è§£å†³ç°åœ¨çš„æ„Ÿæƒ…å±æœºï¼Ÿ"))},"å¦‚ä½•è§£å†³ç°åœ¨çš„æ„Ÿæƒ…å±æœºï¼Ÿ"),y("p",{onClick:a[14]||(a[14]=e=>c("æˆ‘ä»¬æœ‰æœºä¼šå¤åˆå—ï¼Ÿ"))},"æˆ‘ä»¬æœ‰æœºä¼šå¤åˆå—ï¼Ÿ"),y("p",{onClick:a[15]||(a[15]=e=>c("æˆ‘åº”è¯¥æ”¾å¼ƒè¿™æ®µæ„Ÿæƒ…å—ï¼Ÿ"))},"æˆ‘åº”è¯¥æ”¾å¼ƒè¿™æ®µæ„Ÿæƒ…å—ï¼Ÿ"),y("p",{onClick:a[16]||(a[16]=e=>c("æˆ‘å’ŒTaçš„ç¼˜åˆ†æœ‰å¤šæ·±ï¼Ÿ"))},"æˆ‘å’ŒTaçš„ç¼˜åˆ†æœ‰å¤šæ·±ï¼Ÿ"),y("p",{onClick:a[17]||(a[17]=e=>c("æˆ‘çš„çµé­‚ä¼´ä¾£æœ‰ä»€ä¹ˆç‰¹å¾ï¼Ÿ"))},"æˆ‘çš„çµé­‚ä¼´ä¾£æœ‰ä»€ä¹ˆç‰¹å¾ï¼Ÿ")])],2),y("div",{id:"shiye",class:C(["tab-pane",{active:"shiye"===R(r)}])},[a[92]||(a[92]=y("h4",{class:"category-heading"},"äº‹ä¸šå‘å±•",-1)),y("div",W,[y("p",{onClick:a[18]||(a[18]=e=>c("æˆ‘é€‚åˆç°åœ¨çš„å·¥ä½œ/è¡Œä¸šå—ï¼Ÿ"))}," æˆ‘é€‚åˆç°åœ¨çš„å·¥ä½œ/è¡Œä¸šå—ï¼Ÿ "),y("p",{onClick:a[19]||(a[19]=e=>c("æˆ‘çš„äº‹ä¸šä»€ä¹ˆæ—¶å€™èƒ½æˆåŠŸï¼Ÿ"))},"æˆ‘çš„äº‹ä¸šä»€ä¹ˆæ—¶å€™èƒ½æˆåŠŸï¼Ÿ"),y("p",{onClick:a[20]||(a[20]=e=>c("æˆ‘é€‚åˆè·³æ§½è¿˜æ˜¯ç»§ç»­åšå®ˆï¼Ÿ"))},"æˆ‘é€‚åˆè·³æ§½è¿˜æ˜¯ç»§ç»­åšå®ˆï¼Ÿ"),y("p",{onClick:a[21]||(a[21]=e=>c("æˆ‘äº‹ä¸šä¸Šçš„è´µäººä¼šæ˜¯è°ï¼Ÿ"))},"æˆ‘äº‹ä¸šä¸Šçš„è´µäººä¼šæ˜¯è°ï¼Ÿ"),y("p",{onClick:a[22]||(a[22]=e=>c("æˆ‘æœªæ¥çš„äº‹ä¸šèµ°å‘æ€ä¹ˆæ ·ï¼Ÿ"))},"æˆ‘æœªæ¥çš„äº‹ä¸šèµ°å‘æ€ä¹ˆæ ·ï¼Ÿ"),y("p",{onClick:a[23]||(a[23]=e=>c("æˆ‘ä»€ä¹ˆæ—¶å€™èƒ½æ‰¾åˆ°æ»¡æ„çš„å·¥ä½œï¼Ÿ"))}," æˆ‘ä»€ä¹ˆæ—¶å€™èƒ½æ‰¾åˆ°æ»¡æ„çš„å·¥ä½œï¼Ÿ ")]),a[93]||(a[93]=y("h4",{class:"category-heading"},"èŒåœºæœºé‡",-1)),y("div",J,[y("p",{onClick:a[24]||(a[24]=e=>c("æˆ‘ä»Šå¹´æœ‰æœºä¼šå‡èŒåŠ è–ªå—ï¼Ÿ"))},"æˆ‘ä»Šå¹´æœ‰æœºä¼šå‡èŒåŠ è–ªå—ï¼Ÿ"),y("p",{onClick:a[25]||(a[25]=e=>c("å¦‚ä½•å¾—åˆ°é¢†å¯¼çš„èµè¯†å’Œé‡ç”¨ï¼Ÿ"))}," å¦‚ä½•å¾—åˆ°é¢†å¯¼çš„èµè¯†å’Œé‡ç”¨ï¼Ÿ "),y("p",{onClick:a[26]||(a[26]=e=>c("æˆ‘åœ¨å…¬å¸çš„å‘å±•å‰æ™¯å¦‚ä½•ï¼Ÿ"))},"æˆ‘åœ¨å…¬å¸çš„å‘å±•å‰æ™¯å¦‚ä½•ï¼Ÿ"),y("p",{onClick:a[27]||(a[27]=e=>c("å¦‚ä½•æ”¹å–„å½“å‰çš„å·¥ä½œçŠ¶æ€ï¼Ÿ"))},"å¦‚ä½•æ”¹å–„å½“å‰çš„å·¥ä½œçŠ¶æ€ï¼Ÿ"),y("p",{onClick:a[28]||(a[28]=e=>c("æˆ‘æœ€è¿‘çš„èŒåœºäººé™…è¿å¦‚ä½•ï¼Ÿ"))},"æˆ‘æœ€è¿‘çš„èŒåœºäººé™…è¿å¦‚ä½•ï¼Ÿ")]),a[94]||(a[94]=y("h4",{class:"category-heading"},"åˆ›ä¸šä¹‹è·¯",-1)),y("div",X,[y("p",{onClick:a[29]||(a[29]=e=>c("æˆ‘é€‚åˆåˆ›ä¸šå—ï¼Ÿ"))},"æˆ‘é€‚åˆåˆ›ä¸šå—ï¼Ÿ"),y("p",{onClick:a[30]||(a[30]=e=>c("æˆ‘çš„åˆ›ä¸šæœ€ä½³æ—¶æœºæ˜¯ä»€ä¹ˆæ—¶å€™ï¼Ÿ"))}," æˆ‘çš„åˆ›ä¸šæœ€ä½³æ—¶æœºæ˜¯ä»€ä¹ˆæ—¶å€™ï¼Ÿ "),y("p",{onClick:a[31]||(a[31]=e=>c("æˆ‘è¯¥å’Œä»€ä¹ˆæ ·çš„äººåˆä¼™ï¼Ÿ"))},"æˆ‘è¯¥å’Œä»€ä¹ˆæ ·çš„äººåˆä¼™ï¼Ÿ"),y("p",{onClick:a[32]||(a[32]=e=>c("æˆ‘çš„åˆ›ä¸šé¡¹ç›®å‰æ™¯å¦‚ä½•ï¼Ÿ"))},"æˆ‘çš„åˆ›ä¸šé¡¹ç›®å‰æ™¯å¦‚ä½•ï¼Ÿ"),y("p",{onClick:a[33]||(a[33]=e=>c("åˆ›ä¸šè¿‡ç¨‹ä¸­éœ€è¦æ³¨æ„å“ªäº›é£é™©ï¼Ÿ"))}," åˆ›ä¸šè¿‡ç¨‹ä¸­éœ€è¦æ³¨æ„å“ªäº›é£é™©ï¼Ÿ "),y("p",{onClick:a[34]||(a[34]=e=>c("æˆ‘çš„åˆ›ä¸šä¼šæˆåŠŸå—ï¼Ÿ"))},"æˆ‘çš„åˆ›ä¸šä¼šæˆåŠŸå—ï¼Ÿ")])],2),y("div",{id:"caifu",class:C(["tab-pane",{active:"caifu"===R(r)}])},[a[95]||(a[95]=y("h4",{class:"category-heading"},"è´¢è¿è¶‹åŠ¿",-1)),y("div",Z,[y("p",{onClick:a[35]||(a[35]=e=>c("æˆ‘è¿‘æœŸçš„è´¢è¿æ€ä¹ˆæ ·ï¼Ÿ"))},"æˆ‘è¿‘æœŸçš„è´¢è¿æ€ä¹ˆæ ·ï¼Ÿ"),y("p",{onClick:a[36]||(a[36]=e=>c("æˆ‘è¿™è¾ˆå­è´¢è¿çš„æ•´ä½“è¶‹åŠ¿ï¼Ÿ"))},"æˆ‘è¿™è¾ˆå­è´¢è¿çš„æ•´ä½“è¶‹åŠ¿ï¼Ÿ"),y("p",{onClick:a[37]||(a[37]=e=>c("æˆ‘ä»€ä¹ˆæ—¶å€™èƒ½å‘è´¢ï¼Ÿ"))},"æˆ‘ä»€ä¹ˆæ—¶å€™èƒ½å‘è´¢ï¼Ÿ"),y("p",{onClick:a[38]||(a[38]=e=>c("æˆ‘é€‚åˆé ä»€ä¹ˆæ–¹å¼èµšé’±ï¼Ÿ"))},"æˆ‘é€‚åˆé ä»€ä¹ˆæ–¹å¼èµšé’±ï¼Ÿ"),y("p",{onClick:a[39]||(a[39]=e=>c("å¦‚ä½•æœ‰æ•ˆæå‡æˆ‘çš„è´¢è¿ï¼Ÿ"))},"å¦‚ä½•æœ‰æ•ˆæå‡æˆ‘çš„è´¢è¿ï¼Ÿ"),y("p",{onClick:a[40]||(a[40]=e=>c("æˆ‘è¿‘æœŸä¼šæœ‰æ„å¤–ä¹‹è´¢å—ï¼Ÿ"))},"æˆ‘è¿‘æœŸä¼šæœ‰æ„å¤–ä¹‹è´¢å—ï¼Ÿ")]),a[96]||(a[96]=y("h4",{class:"category-heading"},"æŠ•èµ„ç†è´¢",-1)),y("div",ee,[y("p",{onClick:a[41]||(a[41]=e=>c("æˆ‘é€‚åˆåšæŠ•èµ„å—ï¼Ÿ"))},"æˆ‘é€‚åˆåšæŠ•èµ„å—ï¼Ÿ"),y("p",{onClick:a[42]||(a[42]=e=>c("æˆ‘åº”è¯¥é€‰æ‹©ä»€ä¹ˆæ ·çš„æŠ•èµ„æ–¹å‘ï¼Ÿ"))}," æˆ‘åº”è¯¥é€‰æ‹©ä»€ä¹ˆæ ·çš„æŠ•èµ„æ–¹å‘ï¼Ÿ "),y("p",{onClick:a[43]||(a[43]=e=>c("è¿™ä¸ªæŠ•èµ„é¡¹ç›®èƒ½èµšé’±å—ï¼Ÿ"))},"è¿™ä¸ªæŠ•èµ„é¡¹ç›®èƒ½èµšé’±å—ï¼Ÿ"),y("p",{onClick:a[44]||(a[44]=e=>c("å¦‚ä½•æ‰èƒ½å®ˆä½æˆ‘çš„è´¢å¯Œï¼Ÿ"))},"å¦‚ä½•æ‰èƒ½å®ˆä½æˆ‘çš„è´¢å¯Œï¼Ÿ"),y("p",{onClick:a[45]||(a[45]=e=>c("æˆ‘çš„æŠ•èµ„é£é™©å¤§å—ï¼Ÿ"))},"æˆ‘çš„æŠ•èµ„é£é™©å¤§å—ï¼Ÿ"),y("p",{onClick:a[46]||(a[46]=e=>c("å¦‚ä½•æ›´å¥½åœ°ç®¡ç†æˆ‘çš„è´¢å¯Œï¼Ÿ"))},"å¦‚ä½•æ›´å¥½åœ°ç®¡ç†æˆ‘çš„è´¢å¯Œï¼Ÿ")]),a[97]||(a[97]=y("h4",{class:"category-heading"},"è´¢åŠ¡çŠ¶å†µ",-1)),y("div",ae,[y("p",{onClick:a[47]||(a[47]=e=>c("æˆ‘ä¸ºä»€ä¹ˆæ€»æ˜¯å­˜ä¸ä½é’±ï¼Ÿ"))},"æˆ‘ä¸ºä»€ä¹ˆæ€»æ˜¯å­˜ä¸ä½é’±ï¼Ÿ"),y("p",{onClick:a[48]||(a[48]=e=>c("æ˜¯ä»€ä¹ˆåŸå› å¯¼è‡´æˆ‘è´¢åŠ¡ç´§å¼ ï¼Ÿ"))}," æ˜¯ä»€ä¹ˆåŸå› å¯¼è‡´æˆ‘è´¢åŠ¡ç´§å¼ ï¼Ÿ "),y("p",{onClick:a[49]||(a[49]=e=>c("æˆ‘æœ€è¿‘ä¼šæœ‰ç ´è´¢é£é™©å—ï¼Ÿ"))},"æˆ‘æœ€è¿‘ä¼šæœ‰ç ´è´¢é£é™©å—ï¼Ÿ"),y("p",{onClick:a[50]||(a[50]=e=>c("å¦‚ä½•é¿å…ä¸å¿…è¦çš„è´¢åŠ¡æŸå¤±ï¼Ÿ"))}," å¦‚ä½•é¿å…ä¸å¿…è¦çš„è´¢åŠ¡æŸå¤±ï¼Ÿ "),y("p",{onClick:a[51]||(a[51]=e=>c("æˆ‘éœ€è¦æ³¨æ„å“ªäº›å¹´ä»½çš„ç ´è´¢ï¼Ÿ"))}," æˆ‘éœ€è¦æ³¨æ„å“ªäº›å¹´ä»½çš„ç ´è´¢ï¼Ÿ "),y("p",{onClick:a[52]||(a[52]=e=>c("æˆ‘è¯¥å¦‚ä½•å¤„ç†æˆ‘çš„å€ºåŠ¡é—®é¢˜ï¼Ÿ"))}," æˆ‘è¯¥å¦‚ä½•å¤„ç†æˆ‘çš„å€ºåŠ¡é—®é¢˜ï¼Ÿ ")])],2),y("div",{id:"renji",class:C(["tab-pane",{active:"renji"===R(r)}])},[a[98]||(a[98]=y("h4",{class:"category-heading"},"ç¤¾äº¤æ¨¡å¼",-1)),y("div",ne,[y("p",{onClick:a[53]||(a[53]=e=>c("æˆ‘çš„äººé™…äº¤å¾€æ¨¡å¼æœ‰ä½•ä¼˜ç¼ºç‚¹ï¼Ÿ"))}," æˆ‘çš„äººé™…äº¤å¾€æ¨¡å¼æœ‰ä½•ä¼˜ç¼ºç‚¹ï¼Ÿ "),y("p",{onClick:a[54]||(a[54]=e=>c("å¦‚ä½•æ‹“å±•æˆ‘çš„é«˜è´¨é‡ç¤¾äº¤åœˆï¼Ÿ"))}," å¦‚ä½•æ‹“å±•æˆ‘çš„é«˜è´¨é‡ç¤¾äº¤åœˆï¼Ÿ "),y("p",{onClick:a[55]||(a[55]=e=>c("æˆ‘ç›®å‰çš„äººé™…å…³ç³»çŠ¶æ€å¦‚ä½•ï¼Ÿ"))}," æˆ‘ç›®å‰çš„äººé™…å…³ç³»çŠ¶æ€å¦‚ä½•ï¼Ÿ "),y("p",{onClick:a[56]||(a[56]=e=>c("æˆ‘ä¼šå¸å¼•å“ªäº›äººè¿›å…¥æˆ‘çš„ç”Ÿæ´»ï¼Ÿ"))}," æˆ‘ä¼šå¸å¼•å“ªäº›äººè¿›å…¥æˆ‘çš„ç”Ÿæ´»ï¼Ÿ "),y("p",{onClick:a[57]||(a[57]=e=>c("å¦‚ä½•è·å¾—ä»–äººçš„ä¿¡ä»»ä¸æ”¯æŒï¼Ÿ"))}," å¦‚ä½•è·å¾—ä»–äººçš„ä¿¡ä»»ä¸æ”¯æŒï¼Ÿ "),y("p",{onClick:a[58]||(a[58]=e=>c("å¦‚ä½•å¤„ç†ä¸æœ‹å‹çš„çŸ›ç›¾ï¼Ÿ"))},"å¦‚ä½•å¤„ç†ä¸æœ‹å‹çš„çŸ›ç›¾ï¼Ÿ")]),a[99]||(a[99]=y("h4",{class:"category-heading"},"è´µäººå–„ç¼˜",-1)),y("div",ie,[y("p",{onClick:a[59]||(a[59]=e=>c("ä»€ä¹ˆæ ·çš„æœ‹å‹æ˜¯æˆ‘çš„è´µäººï¼Ÿ"))},"ä»€ä¹ˆæ ·çš„æœ‹å‹æ˜¯æˆ‘çš„è´µäººï¼Ÿ"),y("p",{onClick:a[60]||(a[60]=e=>c("æˆ‘åº”è¯¥è¿œç¦»ä»€ä¹ˆæ ·çš„æœ‹å‹ï¼Ÿ"))},"æˆ‘åº”è¯¥è¿œç¦»ä»€ä¹ˆæ ·çš„æœ‹å‹ï¼Ÿ"),y("p",{onClick:a[61]||(a[61]=e=>c("å¦‚ä½•ç»“äº¤æ›´å¤šå¿—åŒé“åˆçš„æœ‹å‹ï¼Ÿ"))}," å¦‚ä½•ç»“äº¤æ›´å¤šå¿—åŒé“åˆçš„æœ‹å‹ï¼Ÿ "),y("p",{onClick:a[62]||(a[62]=e=>c("æˆ‘è¯¥å¦‚ä½•ç»´ç³»é‡è¦çš„å‹è°Šï¼Ÿ"))},"æˆ‘è¯¥å¦‚ä½•ç»´ç³»é‡è¦çš„å‹è°Šï¼Ÿ"),y("p",{onClick:a[63]||(a[63]=e=>c("æˆ‘è¯¥ä¿¡ä»»æˆ‘èº«è¾¹çš„æœ‹å‹å—ï¼Ÿ"))},"æˆ‘è¯¥ä¿¡ä»»æˆ‘èº«è¾¹çš„æœ‹å‹å—ï¼Ÿ"),y("p",{onClick:a[64]||(a[64]=e=>c("å¦‚ä½•è·å¾—é¢†å¯¼æˆ–é•¿è¾ˆçš„èµè¯†ï¼Ÿ"))}," å¦‚ä½•è·å¾—é¢†å¯¼æˆ–é•¿è¾ˆçš„èµè¯†ï¼Ÿ ")]),a[100]||(a[100]=y("h4",{class:"category-heading"},"å®¶åº­å…³ç³»",-1)),y("div",se,[y("p",{onClick:a[65]||(a[65]=e=>c("æˆ‘å’Œå®¶äººçš„å…³ç³»æ€ä¹ˆæ ·ï¼Ÿ"))},"æˆ‘å’Œå®¶äººçš„å…³ç³»æ€ä¹ˆæ ·ï¼Ÿ"),y("p",{onClick:a[66]||(a[66]=e=>c("æˆ‘çš„å®¶åº­å¯¹æˆ‘æœ‰ä»€ä¹ˆæ ·çš„å½±å“ï¼Ÿ"))}," æˆ‘çš„å®¶åº­å¯¹æˆ‘æœ‰ä»€ä¹ˆæ ·çš„å½±å“ï¼Ÿ "),y("p",{onClick:a[67]||(a[67]=e=>c("å¦‚ä½•æ”¹å–„æˆ‘ä¸å®¶äººçš„å…³ç³»ï¼Ÿ"))},"å¦‚ä½•æ”¹å–„æˆ‘ä¸å®¶äººçš„å…³ç³»ï¼Ÿ"),y("p",{onClick:a[68]||(a[68]=e=>c("æˆ‘è¯¥å¦‚ä½•å¤„ç†å®¶åº­çŸ›ç›¾ï¼Ÿ"))},"æˆ‘è¯¥å¦‚ä½•å¤„ç†å®¶åº­çŸ›ç›¾ï¼Ÿ"),y("p",{onClick:a[69]||(a[69]=e=>c("æˆ‘ä¸å®¶äººçš„ç¼˜åˆ†æœ‰å¤šæ·±ï¼Ÿ"))},"æˆ‘ä¸å®¶äººçš„ç¼˜åˆ†æœ‰å¤šæ·±ï¼Ÿ"),y("p",{onClick:a[70]||(a[70]=e=>c("å¦‚ä½•æ›´å¥½åœ°ä¸å®¶äººæ²Ÿé€šï¼Ÿ"))},"å¦‚ä½•æ›´å¥½åœ°ä¸å®¶äººæ²Ÿé€šï¼Ÿ")])],2),y("div",{id:"rensheng",class:C(["tab-pane",{active:"rensheng"===R(r)}])},[a[101]||(a[101]=y("h4",{class:"category-heading"},"å­¦ä¸šè§„åˆ’",-1)),y("div",te,[y("p",{onClick:a[71]||(a[71]=e=>c("æˆ‘çš„å­¦ä¸šè¿åŠ¿å¦‚ä½•ï¼Ÿ"))},"æˆ‘çš„å­¦ä¸šè¿åŠ¿å¦‚ä½•ï¼Ÿ"),y("p",{onClick:a[72]||(a[72]=e=>c("æˆ‘é€‚åˆè€ƒç ”/è€ƒå…¬å—ï¼Ÿ"))},"æˆ‘é€‚åˆè€ƒç ”/è€ƒå…¬å—ï¼Ÿ"),y("p",{onClick:a[73]||(a[73]=e=>c("æˆ‘é€‚åˆç»§ç»­æ·±é€ è¿˜æ˜¯å·¥ä½œï¼Ÿ"))},"æˆ‘é€‚åˆç»§ç»­æ·±é€ è¿˜æ˜¯å·¥ä½œï¼Ÿ"),y("p",{onClick:a[74]||(a[74]=e=>c("å¦‚ä½•æå‡æˆ‘çš„å­¦ä¹ æ•ˆç‡ï¼Ÿ"))},"å¦‚ä½•æå‡æˆ‘çš„å­¦ä¹ æ•ˆç‡ï¼Ÿ"),y("p",{onClick:a[75]||(a[75]=e=>c("æˆ‘è¯¥é€‰æ‹©å“ªä¸ªä¸“ä¸š/å­¦æ ¡ï¼Ÿ"))},"æˆ‘è¯¥é€‰æ‹©å“ªä¸ªä¸“ä¸š/å­¦æ ¡ï¼Ÿ"),y("p",{onClick:a[76]||(a[76]=e=>c("æˆ‘è¿™æ¬¡è€ƒè¯•èƒ½é€šè¿‡å—ï¼Ÿ"))},"æˆ‘è¿™æ¬¡è€ƒè¯•èƒ½é€šè¿‡å—ï¼Ÿ")]),a[102]||(a[102]=y("h4",{class:"category-heading"},"ä¸ªäººæˆé•¿",-1)),y("div",le,[y("p",{onClick:a[77]||(a[77]=e=>c("æˆ‘çš„æ€§æ ¼ä¼˜åŠ¿å’ŒåŠ£åŠ¿æ˜¯ä»€ä¹ˆï¼Ÿ"))}," æˆ‘çš„æ€§æ ¼ä¼˜åŠ¿å’ŒåŠ£åŠ¿æ˜¯ä»€ä¹ˆï¼Ÿ "),y("p",{onClick:a[78]||(a[78]=e=>c("æˆ‘çš„äººç”Ÿä¸»è¦è¯¾é¢˜æ˜¯ä»€ä¹ˆï¼Ÿ"))},"æˆ‘çš„äººç”Ÿä¸»è¦è¯¾é¢˜æ˜¯ä»€ä¹ˆï¼Ÿ"),y("p",{onClick:a[79]||(a[79]=e=>c("å¦‚ä½•æ‰¾åˆ°æˆ‘çš„äººç”Ÿæ–¹å‘ï¼Ÿ"))},"å¦‚ä½•æ‰¾åˆ°æˆ‘çš„äººç”Ÿæ–¹å‘ï¼Ÿ"),y("p",{onClick:a[80]||(a[80]=e=>c("å¦‚ä½•å…‹æœæˆ‘æ€§æ ¼ä¸­çš„å¼±ç‚¹ï¼Ÿ"))},"å¦‚ä½•å…‹æœæˆ‘æ€§æ ¼ä¸­çš„å¼±ç‚¹ï¼Ÿ"),y("p",{onClick:a[81]||(a[81]=e=>c("å¦‚ä½•æœ‰æ•ˆæå‡è‡ªå·±çš„èƒ½é‡çŠ¶æ€ï¼Ÿ"))}," å¦‚ä½•æœ‰æ•ˆæå‡è‡ªå·±çš„èƒ½é‡çŠ¶æ€ï¼Ÿ "),y("p",{onClick:a[82]||(a[82]=e=>c("æˆ‘çš„äººç”Ÿè½¬æŠ˜ç‚¹åœ¨ä½•æ—¶ï¼Ÿ"))},"æˆ‘çš„äººç”Ÿè½¬æŠ˜ç‚¹åœ¨ä½•æ—¶ï¼Ÿ")]),a[103]||(a[103]=y("h4",{class:"category-heading"},"äººç”Ÿæœºé‡",-1)),y("div",oe,[y("p",{onClick:a[83]||(a[83]=e=>c("æˆ‘æœªæ¥åå¹´çš„äººç”Ÿå¤§è¿æ€ä¹ˆæ ·ï¼Ÿ"))}," æˆ‘æœªæ¥åå¹´çš„äººç”Ÿå¤§è¿æ€ä¹ˆæ ·ï¼Ÿ "),y("p",{onClick:a[84]||(a[84]=e=>c("æˆ‘è¯¥å¦‚ä½•å®ç°æˆ‘çš„äººç”Ÿç›®æ ‡ï¼Ÿ"))}," æˆ‘è¯¥å¦‚ä½•å®ç°æˆ‘çš„äººç”Ÿç›®æ ‡ï¼Ÿ "),y("p",{onClick:a[85]||(a[85]=e=>c("æˆ‘çš„äººç”Ÿä¼šæœ‰ä»€ä¹ˆé‡å¤§æœºé‡ï¼Ÿ"))}," æˆ‘çš„äººç”Ÿä¼šæœ‰ä»€ä¹ˆé‡å¤§æœºé‡ï¼Ÿ "),y("p",{onClick:a[86]||(a[86]=e=>c("æˆ‘åº”è¯¥æ³¨æ„å“ªäº›å¥åº·é—®é¢˜ï¼Ÿ"))},"æˆ‘åº”è¯¥æ³¨æ„å“ªäº›å¥åº·é—®é¢˜ï¼Ÿ"),y("p",{onClick:a[87]||(a[87]=e=>c("å¦‚ä½•æ‰èƒ½æ´»å‡ºæ›´ç²¾å½©çš„äººç”Ÿï¼Ÿ"))}," å¦‚ä½•æ‰èƒ½æ´»å‡ºæ›´ç²¾å½©çš„äººç”Ÿï¼Ÿ "),y("p",{onClick:a[88]||(a[88]=e=>c("æœªæ¥çš„äººç”Ÿä¹‹è·¯èµ°å‘å¦‚ä½•ï¼Ÿ"))},"æœªæ¥çš„äººç”Ÿä¹‹è·¯èµ°å‘å¦‚ä½•ï¼Ÿ")])],2)]))}}),[["__scopeId","data-v-eb7521b0"]]),re={class:"spread-bubbles-container"},ce={class:"spread-bubbles"},pe=["onClick"],de={class:"bubble-icon"},ve={class:"bubble-text"},ge={key:0,class:"all-spreads-dropdown"},ye={class:"dropdown-content"},he=["onClick"],me={class:"item-icon"},ke={class:"item-content"},Ce={class:"item-title"},Re={class:"item-description"},fe={class:"item-meta"},be={class:"item-count"},we={key:1,class:"positions-detail"},Ie={class:"positions-grid"},Te=w(p({__name:"TarotSpreadSelector",props:{modelValue:{default:"single"},showPositions:{type:Boolean,default:!1},maxVisibleSpreads:{default:4}},emits:["update:modelValue","change"],setup(e,{emit:a}){const n=e,t=a,l=i(n.modelValue),o=i(!1),u=i(0),r=i(),c=["single","three","love","career","decision","celtic","chakra","year"],p=s(()=>{if(0===u.value)return n.maxVisibleSpreads;const e=u.value<=480,a=u.value<=768;let i=95,s=75,t=6,l=10;e?(i=75,s=60,t=4,l=8):a&&(i=85,s=65,t=5,l=8);const o=u.value;if(o<i)return 1;if(c.length*i+(c.length-1)*t<=o)return c.length;const r=o-s-t-l;let p=1,d=i;for(let n=1;n<c.length;n++){const e=d+t+i;if(!(e<=r))break;p=n+1,d=e}const v=Math.min(2,c.length);return Math.max(v,p)}),d=s(()=>{const e=p.value,a=c.indexOf(l.value);return e>=c.length?c:a<e?c.slice(0,e):[...c.slice(0,e-1),l.value]}),w=s(()=>p.value<c.length);function A(e){l.value=e,t("update:modelValue",e),t("change",e)}function q(){o.value=!o.value}function O(){o.value=!1}function E(e){return{single:"ğŸ”®",three:"ğŸƒ",love:"ğŸ’•",career:"ğŸ’¼",decision:"âš–ï¸",celtic:"âœ¨",chakra:"ğŸ§˜",year:"ğŸ“…"}[e]||"ğŸ´"}function N(){if(r.value){const e=r.value.getBoundingClientRect();u.value=e.width}}function D(e){r.value&&!r.value.contains(e.target)&&O()}return I(()=>{setTimeout(()=>{N()},100),window.addEventListener("resize",N),document.addEventListener("click",D)}),T(()=>{window.removeEventListener("resize",N),document.removeEventListener("click",D)}),_(()=>n.modelValue,e=>{e&&e!==l.value&&(l.value=e)}),(e,a)=>(b(),g("div",{ref_key:"selectorRef",ref:r,class:"tarot-spread-selector"},[y("div",re,[y("div",ce,[(b(!0),g(m,null,k(R(d),e=>(b(),g("button",{key:e,class:C(["spread-bubble",{active:R(l)===e}]),onClick:a=>A(e)},[y("span",de,f(E(e)),1),y("span",ve,f(R(v)[e].name),1)],10,pe))),128)),R(w)?(b(),g("button",{key:0,class:"spread-bubble expand-button",onClick:q},a[0]||(a[0]=[y("span",{class:"bubble-icon"},"â‹¯",-1),y("span",{class:"bubble-text"},"å…¨éƒ¨",-1)]))):h("",!0)])]),R(o)?(b(),g("div",ge,[y("div",ye,[(b(),g(m,null,k(c,e=>y("div",{key:e,class:C(["spread-item",{active:R(l)===e}]),onClick:a=>function(e){A(e),O()}(e)},[y("div",me,f(E(e)),1),y("div",ke,[y("div",Ce,f(R(v)[e].name),1),y("div",Re,f(R(v)[e].description),1)]),y("div",fe,[y("span",be,f(R(v)[e].cardCount)+"å¼ ",1)])],10,he)),64))])])):h("",!0),e.showPositions&&R(l)?(b(),g("div",we,[a[1]||(a[1]=y("h4",null,"ç‰Œä½è¯´æ˜",-1)),y("div",Ie,[(b(!0),g(m,null,k(R(v)[R(l)].positions,(e,a)=>(b(),g("span",{key:a,class:"position-item"},f(a+1)+". "+f(e),1))),128))])])):h("",!0)],512))}}),[["__scopeId","data-v-b7398707"]]),_e={key:0,src:"/static/ssgw.jpg",alt:"ä¸‰å±±å›½ç‹",class:"card-image"},Ae={class:"card-title"},qe={class:"card-description"},Oe={key:1,class:"tarot-spread-container"},Ee={class:"input-container"},Ne=["placeholder","disabled"],De=["disabled"],Le={key:0},Ve={key:1,class:"loading-text"},Se={key:2,class:"ssgw-process"},xe={key:0,class:"shaking-animation"},Ue={class:"shaking-text"},He={class:"shaking-visual"},Be={class:"sign-container"},Pe={key:1,class:"tossing-section"},Fe={class:"result-section"},$e={key:0,class:"result-section"},Me=["innerHTML"],Ke={key:1,class:"bei-container"},Ye=["src","alt"],je={key:2,class:"button-wrapper"},Qe=["disabled"],ze=w(p({__name:"DivinationInput",props:{title:{},description:{},placeholder:{default:"è¯·è¾“å…¥æ‚¨çš„é—®é¢˜"},buttonText:{default:"è¯¢é—®èµ›åšå¤§å¸ˆ"},loadingText:{default:"AIæ€è€ƒä¸­"},loading:{type:Boolean,default:!1},modelValue:{default:""},examples:{default:()=>[]},showInspiration:{type:Boolean,default:!0},hideAfterSubmit:{type:Boolean,default:!0},divinationType:{default:""}},emits:["update:modelValue","submit","typeChange","clear"],setup(e,{emit:a}){const n=e,t=a,l=r();c();const o=i(n.modelValue),u=i(G()),p=i("single"),d=i(!1),w=i(!1),T=i(""),S=i(0),x=i(!1),U=i(!1),H=i(0),B=i([]),P=i(""),F=i(0),$=i(!1),M=i(""),K=s(()=>"ssgw"===n.divinationType?"å¯è¾“å…¥æ‚¨çš„é—®é¢˜ï¼Œä¹Ÿå¯ç›´æ¥æ±‚ç­¾":n.placeholder),Y=s(()=>"ssgw"!==n.divinationType&&!l.path.includes("/divination/ssgw")&&n.showInspiration),j=s(()=>l.path.includes("/divination/tarot")),Q=s(()=>{if(j.value){const e=v[p.value];return e?`å¡”ç½—ç‰ŒÂ·${e.name}`:n.title}return n.title}),z=s(()=>{if(j.value){const e=v[p.value];return e?e.description:n.description}return n.description});function G(){const e=l.path;return e.includes("/divination/tarot_single")?"tarot_single":(e.includes("/divination/tarot"),"tarot")}function W(){o.value="",d.value=!1}function J(){if("ssgw"===n.divinationType||l.path.includes("/ssgw")){const e=o.value.trim()||"å¿ƒä¸­æ‰€æƒ³ä¹‹äº‹";return d.value=!0,t("clear"),void X(e)}o.value.trim()&&!n.loading&&(d.value=!0,t("submit",{question:o.value.trim()}))}function X(e){M.value=e,w.value=!0,T.value="è¯·é™å¿ƒé»˜å¿µï¼Œå‡†å¤‡æ‘‡ç­¾...",S.value=0,setTimeout(()=>{T.value="æ­£åœ¨æ‘‡ç­¾ä¸­...";const e=setInterval(()=>{S.value++,S.value>=5&&(clearInterval(e),setTimeout(()=>{H.value=Math.floor(61*Math.random())+1,w.value=!1,U.value=!0,F.value=0,$.value=!1,B.value=[],P.value=""},1e3))},400)},2e3)}function Z(){if(x.value)return;x.value=!0,B.value=[],P.value="";const e=V();setTimeout(()=>{B.value=[e.bei1,e.bei2];const a=e.result;"åœ£æ¯"===a&&($.value=!0),"åœ£æ¯"===a?(P.value="<strong>åœ£æ¯</strong> (ä¸€å¹³ä¸€å‡¸) - ç¥æ˜åŒæ„æ­¤ç­¾ã€‚",setTimeout(()=>{P.value+="<p>æ­£åœ¨ä¸ºæ‚¨è§£è¯»ç­¾æ–‡...</p>",setTimeout(()=>{t("submit",{question:M.value,signNumber:H.value})},2e3)},1e3)):(F.value++,P.value="ç¬‘æ¯"===a?"<strong>ç¬‘æ¯</strong> (ä¸¤å¹³) - ç¥æ˜ç¬‘è€Œä¸è¯­ï¼Œå¯èƒ½é—®é¢˜ä¸æ˜æˆ–æ—¶æœºæœªåˆ°ã€‚":"<strong>é˜´æ¯</strong> (ä¸¤å‡¸) - ç¥æ˜ä¸åŒæ„æ­¤ç­¾ã€‚",F.value>=3?(P.value+="<p>æ‚¨å·²è¿ç»­ä¸‰æ¬¡æœªèƒ½è·å¾—åœ£æ¯ï¼Œçœ‹æ¥ä»Šæ—¥ä¸å®œå†é—®æ­¤äº‹ï¼Œè¯·æ”¹æ—¥å†æ¥ã€‚</p>",x.value=!1):(P.value+="<p>è¯·é‡æ–°ä¸ºæ‚¨æ‘‡ç­¾...</p>",setTimeout(()=>{U.value=!1,B.value=[],P.value="",X(M.value)},2e3))),x.value=!1},1300)}function ee(e){if(n.loading)return;o.value=e;const a=document.getElementById("userInput");a&&a.focus()}function ae(e){n.loading||e&&e.trim()&&(o.value=e,d.value=!0,t("submit",{question:e}))}function ne(e){p.value=e,t("typeChange",`tarot_${e}`),o.value=""}return _(()=>n.modelValue,e=>{o.value=e}),_(o,e=>{t("update:modelValue",e)}),_(()=>n.divinationType,(e,a)=>{a&&e!==a&&W()}),_(()=>l.path,()=>{j.value&&(u.value=G()),W()}),I(()=>{j.value&&t("typeChange",`tarot_${p.value}`)}),(e,a)=>(b(),g(m,null,[y("div",{class:C(["input-card",{loading:e.loading}])},["ssgw"===e.divinationType?(b(),g("img",_e)):h("",!0),y("h2",Ae,f(R(Q)),1),y("p",qe,f(R(z)),1),R(j)?(b(),g("div",Oe,[q(Te,{modelValue:R(p),"onUpdate:modelValue":a[0]||(a[0]=e=>O(p)?p.value=e:null),onChange:ne},null,8,["modelValue"])])):h("",!0),y("div",Ee,[E(y("input",{id:"userInput","onUpdate:modelValue":a[1]||(a[1]=e=>O(o)?o.value=e:null),type:"text",placeholder:R(K),disabled:e.loading,class:"question-input",onKeyup:D(J,["enter"])},null,40,Ne),[[N,R(o)]]),a[2]||(a[2]=y("div",{class:"input-focus-border"},null,-1))]),y("div",{class:C(["button-wrapper",{"ai-thinking":e.loading}])},[y("button",{id:"submitButton",disabled:e.loading||"ssgw"!==e.divinationType&&!R(o).trim(),class:"submit-button",onClick:J},[e.loading?(b(),g("span",Ve,[L(f(e.loadingText)+" ",1),a[3]||(a[3]=y("span",{class:"loading-dots"},[y("span",{class:"dot"}),y("span",{class:"dot"}),y("span",{class:"dot"})],-1))])):(b(),g("span",Le,f(e.buttonText),1))],8,De)],2),"ssgw"===e.divinationType&&(R(w)||R(x)||R(U))?(b(),g("div",Se,[R(w)?(b(),g("div",xe,[y("p",Ue,f(R(T)),1),y("div",He,[y("div",Be,[(b(),g(m,null,k(5,e=>y("div",{key:e,class:C(["sign-stick",{active:e<=R(S)}])},null,2)),64))])])])):h("",!0),R(x)||R(U)?(b(),g("div",Pe,[y("div",Fe,[y("p",null,[a[4]||(a[4]=L(" æ±‚å¾—ç¬¬ ")),y("strong",null,f(R(H)),1),a[5]||(a[5]=L(" ç­¾ã€‚ "))]),a[6]||(a[6]=y("p",null,"è¯·æŠ•æ·åœ£æ¯ï¼Œè¯¢é—®ä¸‰å±±å›½ç‹æ˜¯å¦åŒæ„æ­¤ç­¾...",-1))]),R(P)?(b(),g("div",$e,[y("p",{innerHTML:R(P)},null,8,Me)])):h("",!0),R(B).length>0?(b(),g("div",Ke,[(b(!0),g(m,null,k(R(B),(e,a)=>(b(),g("img",{key:a,src:`/static/${e}.png`,alt:e,class:"bei-image"},null,8,Ye))),128))])):h("",!0),!R($)&&R(F)<3?(b(),g("div",je,[y("button",{disabled:R(x),class:"toss-button",onClick:Z},f(R(x)?"æŠ•æ·ä¸­...":"æŠ•æ·åœ£æ¯"),9,Qe)])):h("",!0)])):h("",!0)])):h("",!0)],2),R(Y)?(b(),A(ue,{key:0,"spread-type":R(j)?R(p):null,onSelect:ee,onSubmit:ae},null,8,["spread-type"])):h("",!0)],64))}}),[["__scopeId","data-v-5edc0656"]]),Ge=w(p({__name:"DivinationInputSection",props:{divinationType:{},question:{},isLoading:{type:Boolean},hasResult:{type:Boolean}},emits:["update:question","submit","type-change","clear"],setup(e,{emit:a}){const n=e,t=a,l=s(()=>S(n.divinationType)),o=i("single");function u(e){if(e.startsWith("tarot_")){const a=e.replace("tarot_","");o.value=a}t("type-change",e)}function r(e){const a=e.question||n.question;e.question&&t("update:question",e.question),"tarot"===n.divinationType?o.value:"ssgw"===n.divinationType&&e.signNumber,t("submit",{...e,question:a})}return(e,a)=>{var n,i,s,o,c;const p=ze;return e.hasResult||e.isLoading?h("",!0):(b(),A(p,{key:0,modelValue:e.question,"onUpdate:modelValue":a[0]||(a[0]=a=>e.$emit("update:question",a)),title:(null==(n=R(l))?void 0:n.title)||"",description:(null==(i=R(l))?void 0:i.description)||"","button-text":(null==(s=R(l))?void 0:s.buttonText)||"å¼€å§‹å åœ",loading:e.isLoading,placeholder:(null==(o=R(l))?void 0:o.placeholder)||"",examples:((null==(c=R(l))?void 0:c.examples)||[]).map(e=>({text:e.text})),"divination-type":e.divinationType,"hide-after-submit":!1,onSubmit:r,onTypeChange:u,onClear:a[1]||(a[1]=e=>t("clear"))},null,8,["modelValue","title","description","button-text","loading","placeholder","examples","divination-type"]))}}}),[["__scopeId","data-v-07712d59"]]),We={key:0,class:"result-header-actions"},Je=w(p({__name:"ResultHeaderActions",props:{hasResult:{type:Boolean},hasAiResponse:{type:Boolean},isAiLoading:{type:Boolean},isCopied:{type:Boolean},hideActions:{type:Boolean,default:!1}},emits:["back","share"],setup(e,{emit:a}){const n=a;return(e,a)=>e.hasResult&&!e.hideActions?(b(),g("div",We,[y("button",{class:"btn-secondary",onClick:a[0]||(a[0]=e=>n("back"))}," â† è¿”å› "),e.hasAiResponse&&!e.isAiLoading?(b(),g("button",{key:0,class:"btn-secondary",onClick:a[1]||(a[1]=e=>n("share"))},f(e.isCopied?"å·²å¤åˆ¶!":"åˆ†äº«"),1)):h("",!0)])):h("",!0)}}),[["__scopeId","data-v-d50e07a5"]]),Xe={key:0,class:"content-card follow-up-card"},Ze={class:"follow-up-input"},ea=["disabled","onKeydown"],aa=["disabled"],na={key:0},ia={key:1},sa=w(p({__name:"FollowUpSection",props:{hasAiResponse:{type:Boolean},isAiLoading:{type:Boolean}},emits:["send-follow-up"],setup(e,{expose:a,emit:n}){const s=n,t=i(""),l=i(!1);function o(){t.value.trim()&&!l.value&&(s("send-follow-up",t.value.trim()),t.value="",l.value=!0)}return a({setLoading(e){l.value=e}}),(e,a)=>e.hasAiResponse&&!e.isAiLoading?(b(),g("div",Xe,[y("div",Ze,[E(y("textarea",{"onUpdate:modelValue":a[0]||(a[0]=e=>t.value=e),placeholder:"å¯¹AIçš„è§£è¯»è¿›è¡Œè¿½é—®...",disabled:l.value,onKeydown:D(x(o,["prevent"]),["enter"])},null,40,ea),[[N,t.value]]),y("button",{onClick:o,disabled:l.value},[l.value?(b(),g("span",ia,a[1]||(a[1]=[L(" å‘é€ä¸­ "),y("span",{class:"loading-dots"},[y("span",null,"."),y("span",null,"."),y("span",null,".")],-1)]))):(b(),g("span",na,"å‘é€"))],8,aa)])])):h("",!0)}}),[["__scopeId","data-v-18f74067"]]),ta={key:0,class:"content-card error-card"},la={class:"content-text"},oa={class:"form-actions"},ua=w(p({__name:"ErrorDisplay",props:{error:{},hasResult:{type:Boolean}},emits:["retry"],setup(e,{emit:a}){const n=a;return(e,a)=>e.error&&!e.hasResult?(b(),g("div",ta,[y("p",la,f(e.error),1),y("div",oa,[y("button",{class:"btn-primary",onClick:a[0]||(a[0]=e=>n("retry"))},"é‡è¯•")])])):h("",!0)}}),[["__scopeId","data-v-f0381041"]]),ra={class:"page-container"},ca={key:1,class:"ai-actions"},pa=w(p({__name:"UnifiedDivinationView",props:{divinationType:{}},setup(e){const n=e,t=r(),{question:l,isLoading:o,result:u,aiResponse:c,error:p,isAiLoading:d,hasResult:v,hasAiResponse:y,viewingHistory:m,isCopied:k,isCancelled:C,startDivination:f,clearResult:w,shareResult:T,regenerateAI:O,handleHistoryParam:E,clearHistoryParam:N,cancelGeneration:D,conversationHistory:L,isFollowUpLoading:V,handleSendFollowUp:S}=P(n),x=i();function U(e){}const H=s(()=>{if(!u.value)return{data:{},aiResponse:""};const e=L.value.map(e=>({...e,content:i(e.content)}));return{data:u.value.data,aiResponse:c.value,conversationHistory:e}});function B(e){f(e)}function F(){w(),N()}function $(){O()}function M(e){S(e),_(V,e=>{!e&&x.value&&x.value.setLoading(!1)})}return _(()=>n.divinationType,(e,a)=>{!m.value&&a&&e!==a&&(w(),N())}),_(()=>t.query.historyId,(e,a)=>{e&&"string"==typeof e?E():a&&!e&&w()},{immediate:!0}),I(()=>{E()}),(e,n)=>(b(),g("div",ra,[q(Ge,{"divination-type":e.divinationType,question:R(l),"is-loading":R(o),"has-result":R(v),"onUpdate:question":n[0]||(n[0]=e=>l.value=e),onSubmit:B,onTypeChange:U,onClear:F},null,8,["divination-type","question","is-loading","has-result"]),q(Je,{"has-result":R(v),"has-ai-response":R(y),"is-ai-loading":R(d),"is-copied":R(k),"hide-actions":!!R(t).query.historyId,onBack:F,onShare:R(T)},null,8,["has-result","has-ai-response","is-ai-loading","is-copied","hide-actions","onShare"]),R(v)?(b(),A(a,{key:0,type:e.divinationType,result:R(H),"is-ai-loading":R(d)||R(V),error:R(p),question:R(l),"conversation-history":R(L),"is-follow-up-loading":R(V),onRetry:$},null,8,["type","result","is-ai-loading","error","question","conversation-history","is-follow-up-loading"])):h("",!0),R(v)?(b(),g("div",ca,[R(d)?(b(),g("button",{key:0,class:"btn-secondary",onClick:n[1]||(n[1]=(...e)=>R(D)&&R(D)(...e))},"å–æ¶ˆç”Ÿæˆ")):h("",!0),R(d)||!R(p)&&!R(C)?h("",!0):(b(),g("button",{key:1,class:"btn-primary",onClick:$}," é‡æ–°ç”Ÿæˆ "))])):h("",!0),q(ua,{error:R(p),"has-result":R(v),onRetry:$},null,8,["error","has-result"]),q(sa,{ref_key:"followUpSectionRef",ref:x,"has-ai-response":R(y),"is-ai-loading":R(d),onSendFollowUp:M},null,8,["has-ai-response","is-ai-loading"])]))}}),[["__scopeId","data-v-f7a8e30b"]]);export{pa as default};
