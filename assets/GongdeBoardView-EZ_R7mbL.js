import{d as t,r as a,e as s,c as l,a as n,h as e,t as o,g as c,F as r,l as i,o as u}from"./vendor-DTFIXZ-L.js";import{_ as d}from"./index-BmEZ7QQI.js";import"./utils-B-ODjm7Z.js";const v={class:"page-container"},h={class:"content-card"},m={class:"stats-container"},g={class:"stat-item"},p={class:"stat-number"},y={class:"stat-item"},f={class:"stat-number"},b={class:"stat-item"},w={class:"stat-number"},k={class:"content-card"},j={class:"table-container"},L={class:"donation-table"},_={key:0,class:"anonymous-badge"},x={key:1},D={class:"amount-cell"},S={class:"note-cell"},T={key:0},$={class:"total-row"},z={class:"amount-cell"},A={colspan:"2"},B={key:0,class:"empty-state"},C=d(t({__name:"GongdeBoardView",setup(t){const d=a([]),C=a({url:"https://sydf.cc/donations.json",isLoading:!1,error:null});function E(t){return`¥${t.toLocaleString()}`}function F(){return d.value.reduce((t,a)=>t+a.amount,0)}function G(){return d.value.length}return s(()=>{!async function(){C.value.isLoading=!0,C.value.error=null;try{const t=await fetch(C.value.url);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const a=await t.json();d.value=a}catch(t){C.value.error="获取远程数据失败，使用本地数据"}finally{C.value.isLoading=!1}}()}),(t,a)=>(u(),l("div",v,[a[8]||(a[8]=n("h1",{class:"page-title"},"功德榜 🏆",-1)),n("div",h,[a[3]||(a[3]=n("h2",{class:"section-title"},[e("功德统计 "),n("span",{class:"highlight-text"},"爱心汇聚")],-1)),n("div",m,[n("div",g,[n("div",p,o(F()),1),a[0]||(a[0]=n("div",{class:"stat-label"},"总捐赠金额 (元)",-1))]),n("div",y,[n("div",f,o(G()),1),a[1]||(a[1]=n("div",{class:"stat-label"},"捐赠人数",-1))]),n("div",b,[n("div",w,o(Math.round(F()/G())),1),a[2]||(a[2]=n("div",{class:"stat-label"},"人均捐赠 (元)",-1))])])]),n("div",k,[a[7]||(a[7]=n("h2",{class:"section-title"},"捐赠记录",-1)),n("div",j,[n("table",L,[a[5]||(a[5]=n("thead",null,[n("tr",null,[n("th",null,"序号"),n("th",null,"捐赠人"),n("th",null,"金额"),n("th",null,"日期"),n("th",null,"备注")])],-1)),n("tbody",null,[(u(!0),l(r,null,i(d.value,(t,a)=>{return u(),l("tr",{key:t.id},[n("td",null,o(a+1),1),n("td",null,[t.isAnonymous?(u(),l("span",_,"🙈 匿名")):(u(),l("span",x,o(t.name),1))]),n("td",D,o(E(t.amount)),1),n("td",null,o((s=t.date,new Date(s).toLocaleDateString("zh-CN"))),1),n("td",S,o(t.note||"-"),1)]);var s}),128))]),d.value.length>0?(u(),l("tfoot",T,[n("tr",$,[a[4]||(a[4]=n("td",{colspan:"2"},[n("strong",null,"总计")],-1)),n("td",z,[n("strong",null,o(E(F())),1)]),n("td",A,[n("strong",null,o(G())+" 位捐赠人",1)])])])):c("",!0)]),0===d.value.length?(u(),l("div",B,[...a[6]||(a[6]=[n("div",{class:"empty-icon"},"📋",-1),n("p",null,"暂无捐赠记录",-1)])])):c("",!0)])])]))}}),[["__scopeId","data-v-c43d2352"]]);export{C as default};
