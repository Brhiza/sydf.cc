import{d as g,e as h,w as D,i as C,c as a,a as t,t as d,l as p,p as w,C as H,j as q,F as x,r as B,G as I,u as N,H as V,I as S,o as l,_ as L}from"./index-DwBVnuDN.js";import{a as _}from"./divination-config-DPDDIOby.js";const $={class:"history-view"},z={class:"history-container"},F={key:0,class:"history-detail-card"},T={class:"detail-header"},j={class:"header-left"},A={class:"detail-title"},E={class:"detail-date"},G={class:"detail-content"},M={class:"detail-question"},J={class:"question-text"},K={class:"detail-result"},O={class:"detail-footer"},P={key:1,class:"history-card"},Q={class:"history-content"},U={key:0,class:"empty-message"},W={key:1,class:"history-list"},X=["onClick"],Y={class:"item-header"},Z={class:"item-type"},tt={class:"item-date"},et={class:"item-question"},st={key:0,class:"card-footer"},ot=g({__name:"HistoryView",props:{selectedRecordId:{type:String,default:null},showDetail:{type:Boolean,default:!1}},setup(u){const c=u,r=N(),n=h([]),o=h(null);function y(){if(n.value=I(),c.selectedRecordId){const s=n.value.find(e=>e.id===c.selectedRecordId);s?o.value=s:r.push("/history")}}function f(s){r.push(`/history/${s.id}`)}function m(){confirm("确定要清空所有历史记录吗？此操作不可撤销。")&&(V(),n.value=[])}function k(s){confirm("确定要删除这条记录吗？此操作不可撤销。")&&(S(s),v())}function v(){r.push("/history")}function b(s){return new Date(s).toLocaleDateString("zh-CN")}function R(s){return new Date(s).toLocaleString("zh-CN")}return D(()=>c.selectedRecordId,s=>{if(s){const e=n.value.find(i=>i.id===s);e&&(o.value=e)}else o.value=null}),C(()=>{y()}),(s,e)=>(l(),a("div",$,[t("div",z,[u.showDetail&&o.value?(l(),a("div",F,[t("div",T,[t("div",j,[t("h2",A,d(p(_)(o.value.type)),1),t("p",E,d(R(o.value.timestamp)),1)]),t("div",{class:"header-actions"},[t("button",{class:"back-button",onClick:v},e[1]||(e[1]=[t("span",{class:"back-icon"},"←",-1),t("span",{class:"back-text"},"返回",-1)]))])]),t("div",G,[t("div",M,[e[2]||(e[2]=t("h3",{class:"question-label"},"问题",-1)),t("p",J,d(o.value.question),1)]),t("div",K,[e[3]||(e[3]=t("h3",{class:"result-label"},"结果",-1)),w(H,{type:o.value.type,result:o.value.result},null,8,["type","result"])])]),t("div",O,[t("button",{onClick:e[0]||(e[0]=i=>k(o.value.id)),class:"delete-button"},e[4]||(e[4]=[t("span",{class:"delete-icon"},"🗑️",-1),t("span",{class:"delete-text"},"删除记录",-1)]))])])):(l(),a("div",P,[e[6]||(e[6]=t("div",{class:"card-header"},[t("h2",{class:"card-title"},"历史记录"),t("p",{class:"card-description"},"这里保存了您最近的占卜记录，仅保存在本地哦。")],-1)),t("div",Q,[n.value.length===0?(l(),a("div",U,e[5]||(e[5]=[t("div",{class:"empty-icon"},"📜",-1),t("p",null,"暂无历史记录",-1),t("p",{class:"empty-hint"},"您的占卜记录将会显示在这里",-1)]))):(l(),a("div",W,[(l(!0),a(x,null,B(n.value,i=>(l(),a("div",{key:i.id,class:"history-item"},[t("button",{onClick:it=>f(i),class:"history-item-button"},[t("div",Y,[t("span",Z,d(p(_)(i.type)),1),t("span",tt,d(b(i.timestamp)),1)]),t("div",et,d(i.question),1)],8,X)]))),128))]))]),n.value.length>0?(l(),a("div",st,[t("button",{onClick:m,class:"clear-button"},"清空历史记录")])):q("",!0)]))])]))}}),nt=L(ot,[["__scopeId","data-v-3661d27e"]]);export{nt as default};
