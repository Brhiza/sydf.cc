import{d as e,o as a,a as t,m as s,q as l,T as i,G as n,H as o,e as c,c as r,g as d,b as u,r as v,E as m,h as g,t as h,n as p,F as b,l as f}from"./vendor-BUyyYNCK.js";import{_ as y}from"./index-btEf4fty.js";import"./utils-CwRxlNlL.js";const k={class:"modal-content"},w={class:"image-container"},L=["src","alt"],_=y(e({__name:"ImageModal",props:{imageUrl:{},isVisible:{type:Boolean},title:{}},emits:["close","image-loaded","image-error"],setup(e,{emit:v}){const m=v;function g(){m("close")}function h(e){e.target===e.currentTarget&&g()}function p(e){"Escape"===e.key&&g()}return a(()=>{document.addEventListener("keydown",p)}),t(()=>{document.removeEventListener("keydown",p)}),(a,t)=>(c(),s(o,{to:"body"},[l(i,{name:"modal"},{default:n(()=>[e.isVisible?(c(),r("div",{key:0,class:"modal-backdrop",onClick:h},[u("div",k,[u("button",{class:"close-button","aria-label":"å…³é—­",onClick:g},[...t[2]||(t[2]=[u("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[u("path",{d:"M18 6L6 18M6 6l12 12"})],-1)])]),u("div",w,[u("img",{src:e.imageUrl,alt:e.title||"è¯ä¹¦å›¾ç‰‡",class:"certificate-image",onLoad:t[0]||(t[0]=e=>a.$emit("image-loaded")),onError:t[1]||(t[1]=e=>a.$emit("image-error"))},null,40,L)])])])):d("",!0)]),_:1})]))}}),[["__scopeId","data-v-46b23c7b"]]),x={class:"page-container"},j={class:"content-card"},C={class:"stats-container"},M={class:"stat-item"},U={class:"stat-number"},V={class:"stat-item"},E={class:"stat-number"},T={class:"stat-item"},$={class:"stat-number"},B={class:"content-card"},D={class:"section-header"},z={class:"section-title"},q=["disabled","title"],A={class:"table-container"},I={class:"certificate-table"},G={key:0,class:"anonymous-badge"},H={key:1},S={class:"amount-cell"},F={class:"link-cell"},N=["onClick"],P={key:1,class:"no-certificate"},J={key:0},K={class:"total-row"},O={colspan:"3",class:"amount-cell"},Q={key:0,class:"empty-state"},R=y(e({__name:"GongdeBoxView",setup(e){const t=v([]),s=v({url:"https://cdn.jsdelivr.net/gh/Brhiza/sydfjuanzeng@main/zhengshu.json",isLoading:!1,error:null}),i=v({isVisible:!1,imageUrl:"",title:""});function n(e){return`Â¥${e.toLocaleString()}`}function o(){const e=t.value.reduce((e,a)=>e+a.amount,0);return Math.round(100*e)/100}function y(){return t.value.length}async function k(){s.value.isLoading=!0,s.value.error=null;try{const e=Date.now(),a=`${s.value.url}?_t=${e}`,l=await fetch(a,{cache:"no-cache"});if(!l.ok)throw new Error(`HTTP error! status: ${l.status}`);const i=await l.json();t.value=i}catch(e){s.value.error="è·å–è¿œç¨‹æ•°æ®å¤±è´¥ï¼Œä½¿ç”¨æœ¬åœ°æ•°æ®"}finally{s.value.isLoading=!1}}function w(){i.value.isVisible=!1,i.value.imageUrl="",i.value.title=""}function L(e){e.preventDefault()}function R(e){e.preventDefault(),k()}return a(()=>{k()}),(e,a)=>(c(),r("div",x,[a[10]||(a[10]=m('<h1 class="page-title" data-v-94cee67e>åŠŸå¾·ç®± ğŸ™</h1><div class="content-card" data-v-94cee67e><div class="donation-container" data-v-94cee67e><div class="merit-box-section" data-v-94cee67e><img src="/static/gongdexiang.jpg" alt="åŠŸå¾·ç®±" class="merit-box-image" data-v-94cee67e></div><div class="payment-methods" data-v-94cee67e><div class="payment-method" data-v-94cee67e><img src="/static/alipay.png" alt="æ”¯ä»˜å®æ”¶æ¬¾ç " class="qrcode-image" data-v-94cee67e><p class="donation-hint" data-v-94cee67e>æ”¯ä»˜å®æ‰«ç æèµ </p></div><div class="payment-method" data-v-94cee67e><img src="/static/wechat.png" alt="å¾®ä¿¡æ”¶æ¬¾ç " class="qrcode-image" data-v-94cee67e><p class="donation-hint" data-v-94cee67e>å¾®ä¿¡æ‰«ç æèµ </p></div></div><div class="merit-box-link" data-v-94cee67e><a href="/#/gongdeboard" data-v-94cee67e> ğŸ™ åŠŸå¾·æ¦œ </a></div></div></div>',2)),u("div",j,[a[3]||(a[3]=u("h2",{class:"section-title"},[g("åŠŸå¾·ç»Ÿè®¡ "),u("span",{class:"highlight-text"},"çˆ±å¿ƒæ±‡èš")],-1)),u("div",C,[u("div",M,[u("div",U,h(o()),1),a[0]||(a[0]=u("div",{class:"stat-label"},"æ€»æèµ é¢ (å…ƒ)",-1))]),u("div",V,[u("div",E,h(y()),1),a[1]||(a[1]=u("div",{class:"stat-label"},"æèµ æ¬¡æ•°",-1))]),u("div",T,[u("div",$,h(Math.round(o()/y())),1),a[2]||(a[2]=u("div",{class:"stat-label"},"æ¬¡å‡æèµ  (å…ƒ)",-1))])])]),u("div",B,[u("div",D,[u("h2",z,[a[5]||(a[5]=g(" æèµ è¯ä¹¦ ",-1)),u("button",{class:"refresh-button",disabled:s.value.isLoading,title:s.value.isLoading?"æ­£åœ¨åˆ·æ–°...":"ç‚¹å‡»åˆ·æ–°æ•°æ®",type:"button",onClick:k,onTouchstart:L,onTouchend:R},[(c(),r("svg",{class:p(["refresh-icon",{rotating:s.value.isLoading}]),viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[...a[4]||(a[4]=[u("path",{d:"M1 4v6h6M23 20v-6h-6"},null,-1),u("path",{d:"M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15"},null,-1)])],2))],40,q)])]),a[9]||(a[9]=u("div",{class:"refresh-notice"},[u("p",null,"ğŸ’¡ æ•°æ®æ›´æ–°å¯èƒ½å­˜åœ¨å»¶è¿Ÿï¼Œå¦‚éœ€æŸ¥çœ‹æœ€æ–°æèµ è®°å½•ï¼Œè¯·ç‚¹å‡»ä¸Šæ–¹åˆ·æ–°æŒ‰é’®")],-1)),u("div",A,[u("table",I,[a[7]||(a[7]=u("thead",null,[u("tr",null,[u("th",null,"åºå·"),u("th",null,"æèµ é¡¹ç›®"),u("th",null,"é‡‘é¢"),u("th",null,"æ—¥æœŸ"),u("th",null,"é“¾æ¥")])],-1)),u("tbody",null,[(c(!0),r(b,null,f(t.value,(e,a)=>{return c(),r("tr",{key:e.id},[u("td",null,h(a+1),1),u("td",null,[e.isAnonymous?(c(),r("span",G,"ğŸ™ˆ åŒ¿åæèµ ")):(c(),r("span",H,h(e.name||"çˆ±å¿ƒæèµ "),1))]),u("td",S,h(n(e.amount)),1),u("td",null,h((t=e.date,new Date(t).toLocaleDateString("zh-CN"))),1),u("td",F,[e.certificateUrl?(c(),r("button",{key:0,class:"view-certificate-btn",onClick:a=>{return t=e.certificateUrl,s=e.name?e.name+"çš„æèµ è¯ä¹¦":"æèµ è¯ä¹¦",void(i.value={isVisible:!0,imageUrl:t,title:s||"æèµ è¯ä¹¦"});var t,s}}," æŸ¥çœ‹è¯ä¹¦ ",8,N)):(c(),r("span",P,"æš‚æ— è¯ä¹¦"))])]);var t}),128))]),t.value.length>0?(c(),r("tfoot",J,[u("tr",K,[a[6]||(a[6]=u("td",{colspan:"2"},[u("strong",null,"æ€»è®¡")],-1)),u("td",O,[u("strong",null,h(n(o())),1)])])])):d("",!0)]),0===t.value.length?(c(),r("div",Q,[...a[8]||(a[8]=[u("div",{class:"empty-icon"},"ğŸ“‹",-1),u("p",null,"æš‚æ— æèµ è®°å½•",-1)])])):d("",!0)])]),l(_,{"image-url":i.value.imageUrl,"is-visible":i.value.isVisible,title:i.value.title,onClose:w},null,8,["image-url","is-visible","title"])]))}}),[["__scopeId","data-v-94cee67e"]]);export{R as default};
