import{d as g,b as h,w as D,h as C,c as a,a as t,t as d,k as p,m as w,B as H,i as q,F as x,r as B,C as N,u as V,G as I,H as S,o as l,_ as L}from"./index-BC5h_unE.js";import{a as _}from"./divination-config-DPDDIOby.js";const $={class:"history-view"},z={class:"history-container"},F={key:0,class:"history-detail-card"},T={class:"detail-header"},A={class:"header-left"},E={class:"detail-title"},G={class:"detail-date"},M={class:"detail-content"},j={class:"detail-question"},J={class:"question-text"},K={class:"detail-result"},O={class:"detail-footer"},P={key:1,class:"history-card"},Q={class:"history-content"},U={key:0,class:"empty-message"},W={key:1,class:"history-list"},X=["onClick"],Y={class:"item-header"},Z={class:"item-type"},tt={class:"item-date"},st={class:"item-question"},et={key:0,class:"card-footer"},ot=g({__name:"HistoryView",props:{selectedRecordId:{type:String,default:null},showDetail:{type:Boolean,default:!1}},setup(u){const c=u,r=V(),n=h([]),o=h(null);function y(){if(n.value=N(),c.selectedRecordId){const e=n.value.find(s=>s.id===c.selectedRecordId);e?o.value=e:r.push("/history")}}function f(e){r.push(`/history/${e.id}`)}function m(){confirm("确定要清空所有历史记录吗？此操作不可撤销。")&&(I(),n.value=[])}function k(e){confirm("确定要删除这条记录吗？此操作不可撤销。")&&(S(e),v())}function v(){r.push("/history")}function b(e){return new Date(e).toLocaleDateString("zh-CN")}function R(e){return new Date(e).toLocaleString("zh-CN")}return D(()=>c.selectedRecordId,e=>{if(e){const s=n.value.find(i=>i.id===e);s&&(o.value=s)}else o.value=null}),C(()=>{y()}),(e,s)=>(l(),a("div",$,[t("div",z,[u.showDetail&&o.value?(l(),a("div",F,[t("div",T,[t("div",A,[t("h2",E,d(p(_)(o.value.type)),1),t("p",G,d(R(o.value.timestamp)),1)]),t("div",{class:"header-actions"},[t("button",{class:"back-button",onClick:v},s[1]||(s[1]=[t("span",{class:"back-icon"},"←",-1),t("span",{class:"back-text"},"返回",-1)]))])]),t("div",M,[t("div",j,[s[2]||(s[2]=t("h3",{class:"question-label"},"问题",-1)),t("p",J,d(o.value.question),1)]),t("div",K,[s[3]||(s[3]=t("h3",{class:"result-label"},"结果",-1)),w(H,{type:o.value.type,result:o.value.result},null,8,["type","result"])])]),t("div",O,[t("button",{onClick:s[0]||(s[0]=i=>k(o.value.id)),class:"delete-button"},s[4]||(s[4]=[t("span",{class:"delete-icon"},"🗑️",-1),t("span",{class:"delete-text"},"删除记录",-1)]))])])):(l(),a("div",P,[s[6]||(s[6]=t("div",{class:"card-header"},[t("h2",{class:"card-title"},"历史记录"),t("p",{class:"card-description"},"这里保存了您最近的占卜记录，仅保存在本地哦。")],-1)),t("div",Q,[n.value.length===0?(l(),a("div",U,s[5]||(s[5]=[t("div",{class:"empty-icon"},"📜",-1),t("p",null,"暂无历史记录",-1),t("p",{class:"empty-hint"},"您的占卜记录将会显示在这里",-1)]))):(l(),a("div",W,[(l(!0),a(x,null,B(n.value,i=>(l(),a("div",{key:i.id,class:"history-item"},[t("button",{onClick:it=>f(i),class:"history-item-button"},[t("div",Y,[t("span",Z,d(p(_)(i.type)),1),t("span",tt,d(b(i.timestamp)),1)]),t("div",st,d(i.question),1)],8,X)]))),128))]))]),n.value.length>0?(l(),a("div",et,[t("button",{onClick:m,class:"clear-button"},"清空历史记录")])):q("",!0)]))])]))}}),nt=L(ot,[["__scopeId","data-v-fdfd2385"]]);export{nt as default};
