import{d as t,r as s,e as a,c as l,a as n,h as e,t as o,n as i,g as r,F as c,l as u,o as d}from"./vendor-RKAyd5D7.js";import{_ as v}from"./index-BQiCrTFR.js";import"./utils-B-ODjm7Z.js";const h={class:"page-container"},g={class:"content-card"},m={class:"stats-container"},p={class:"stat-item"},f={class:"stat-number"},b={class:"stat-item"},y={class:"stat-number"},k={class:"stat-item"},w={class:"stat-number"},L={class:"content-card"},j={class:"section-header"},_={class:"section-title"},x=["disabled","title"],M={class:"table-container"},A={class:"donation-table"},C={key:0,class:"anonymous-badge"},B={key:1},D={class:"amount-cell"},S={class:"note-cell"},T={key:0},$={class:"total-row"},z={class:"amount-cell"},E={colspan:"2"},F={key:0,class:"empty-state"},G=v(t({__name:"GongdeBoardView",setup(t){const v=s([]),G=s({url:"https://sydf.cc/donations.json",isLoading:!1,error:null});function H(t){return`¥${t.toLocaleString()}`}function I(){return v.value.reduce((t,s)=>t+s.amount,0)}function N(){return v.value.length}async function P(){G.value.isLoading=!0,G.value.error=null;try{const t=await fetch(G.value.url);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const s=await t.json();v.value=s}catch(t){G.value.error="获取远程数据失败，使用本地数据"}finally{G.value.isLoading=!1}}return a(()=>{P()}),(t,s)=>(d(),l("div",h,[s[10]||(s[10]=n("h1",{class:"page-title"},"功德榜 🏆",-1)),n("div",g,[s[3]||(s[3]=n("h2",{class:"section-title"},[e("功德统计 "),n("span",{class:"highlight-text"},"爱心汇聚")],-1)),n("div",m,[n("div",p,[n("div",f,o(I()),1),s[0]||(s[0]=n("div",{class:"stat-label"},"总捐赠额 (元)",-1))]),n("div",b,[n("div",y,o(N()),1),s[1]||(s[1]=n("div",{class:"stat-label"},"捐赠人数",-1))]),n("div",k,[n("div",w,o(Math.round(I()/N())),1),s[2]||(s[2]=n("div",{class:"stat-label"},"人均捐赠 (元)",-1))])])]),n("div",L,[n("div",j,[n("h2",_,[s[5]||(s[5]=e(" 捐赠记录 ",-1)),n("button",{class:"refresh-button",onClick:P,disabled:G.value.isLoading,title:G.value.isLoading?"正在刷新...":"点击刷新数据"},[(d(),l("svg",{class:i(["refresh-icon",{rotating:G.value.isLoading}]),viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[...s[4]||(s[4]=[n("path",{d:"M1 4v6h6M23 20v-6h-6"},null,-1),n("path",{d:"M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15"},null,-1)])],2))],8,x)])]),s[9]||(s[9]=n("div",{class:"refresh-notice"},[n("p",null,"💡 数据更新可能存在延迟，如需查看最新捐赠记录，请点击上方刷新按钮")],-1)),n("div",M,[n("table",A,[s[7]||(s[7]=n("thead",null,[n("tr",null,[n("th",null,"序号"),n("th",null,"捐赠人"),n("th",null,"金额"),n("th",null,"日期"),n("th",null,"备注")])],-1)),n("tbody",null,[(d(!0),l(c,null,u(v.value,(t,s)=>{return d(),l("tr",{key:t.id},[n("td",null,o(s+1),1),n("td",null,[t.isAnonymous?(d(),l("span",C,"🙈 匿名")):(d(),l("span",B,o(t.name),1))]),n("td",D,o(H(t.amount)),1),n("td",null,o((a=t.date,new Date(a).toLocaleDateString("zh-CN"))),1),n("td",S,o(t.note||"-"),1)]);var a}),128))]),v.value.length>0?(d(),l("tfoot",T,[n("tr",$,[s[6]||(s[6]=n("td",{colspan:"2"},[n("strong",null,"总计")],-1)),n("td",z,[n("strong",null,o(H(I())),1)]),n("td",E,[n("strong",null,o(N())+" 位捐赠人",1)])])])):r("",!0)]),0===v.value.length?(d(),l("div",F,[...s[8]||(s[8]=[n("div",{class:"empty-icon"},"📋",-1),n("p",null,"暂无捐赠记录",-1)])])):r("",!0)])])]))}}),[["__scopeId","data-v-1cfc41f2"]]);export{G as default};
